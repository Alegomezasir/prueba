import{r as A,bG as W,az as yt,l as Z,j as w,e as ue,C as ve}from"./main-1.0.4.js";import{v as ht,B as ye,K as bt,J as wt,V as St,a2 as Tt,U as Et,T as Ot,ae as jt,a1 as xt}from"./main-1.0.4-3f927327.js";import{P as ee}from"./DialogContent-1.0.4-604ea0cd.js";import{e as _t,f as Rt}from"./index.esm-1.0.4-53f8e071.js";import{d as Ct}from"./ActionsDml-1.0.4-1a4856d6.js";import{C as At}from"./TabPanel-1.0.4-14af6bd6.js";import{B as he}from"./CardContent-1.0.4-55ef4296.js";import{P as Lt}from"./TextField-1.0.4-6b1bbbfd.js";import{T as Nt,I as Pt}from"./iconBase-1.0.4-684ba590.js";import{R as Bt}from"./RadioGroup-1.0.4-078a1a14.js";import{F as te}from"./FormControlLabel-1.0.4-64c2f78b.js";import{R as ne}from"./Radio-1.0.4-bd38ebb7.js";import"./Close-1.0.4-ca2bff70.js";import"./AdminTheme-1.0.4-e85d4fc0.js";import"./Tabs-1.0.4-276a4db7.js";function re(e){if(typeof window>"u")return e;const t=A.useRef(null);return A.useLayoutEffect(()=>{t.current=e}),A.useCallback((...o)=>{var s;(s=t.current)===null||s===void 0||s.call(t,...o)},[])}const ke={};function Ft(e,t){ke[e]||(ke[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}const Mt={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};function kt({parentPopupState:e,popupId:t,variant:o,disableAutoFocus:s}){const h=A.useRef(!0);A.useEffect(()=>(h.current=!0,()=>{h.current=!1}),[]);const[g,v]=A.useState(Mt),u=A.useCallback(c=>{h.current&&v(c)},[]),_=A.useCallback(c=>u(i=>({...i,setAnchorElUsed:!0,anchorEl:c??void 0})),[]),d=re(c=>(g.isOpen?l(c):p(c),g)),p=re(c=>{const i=c instanceof Element?void 0:c,T=c instanceof Element?c:(c==null?void 0:c.currentTarget)instanceof Element?c.currentTarget:void 0;if((i==null?void 0:i.type)==="touchstart"){u(f=>({...f,_deferNextOpen:!0}));return}const I=i==null?void 0:i.clientX,H=i==null?void 0:i.clientY,D=typeof I=="number"&&typeof H=="number"?{left:I,top:H}:void 0,E=f=>{if(!c&&!f.setAnchorElUsed&&o!=="dialog"&&Ft("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return f;setTimeout(()=>e._setChildPopupState(B))}const m={...f,isOpen:!0,anchorPosition:D,hovered:(i==null?void 0:i.type)==="mouseover"||f.hovered,focused:(i==null?void 0:i.type)==="focus"||f.focused,_openEventType:i==null?void 0:i.type};return i!=null&&i.currentTarget?f.setAnchorElUsed||(m.anchorEl=i==null?void 0:i.currentTarget):T&&(m.anchorEl=T),m};u(f=>f._deferNextOpen?(setTimeout(()=>u(E),0),{...f,_deferNextOpen:!1}):E(f))}),j=c=>{const{_childPopupState:i}=c;return setTimeout(()=>{i==null||i.close(),e==null||e._setChildPopupState(null)}),{...c,isOpen:!1,hovered:!1,focused:!1}},l=re(c=>{const i=c instanceof Element?void 0:c;if((i==null?void 0:i.type)==="touchstart"){u(T=>({...T,_deferNextClose:!0}));return}u(T=>T._deferNextClose?(setTimeout(()=>u(j),0),{...T,_deferNextClose:!1}):j(T))}),x=A.useCallback((c,i)=>{c?p(i):l(i)},[]),q=re(c=>{const{relatedTarget:i}=c;u(T=>T.hovered&&!(i instanceof Element&&be(i,B))?T.focused?{...T,hovered:!1}:j(T):T)}),R=re(c=>{if(!c)return;const{relatedTarget:i}=c;u(T=>T.focused&&!(i instanceof Element&&be(i,B))?T.hovered?{...T,focused:!1}:j(T):T)}),S=A.useCallback(c=>u(i=>({...i,_childPopupState:c})),[]),B={...g,setAnchorEl:_,popupId:t,variant:o,open:p,close:l,toggle:d,setOpen:x,onBlur:R,onMouseLeave:q,disableAutoFocus:s??!!(g.hovered||g.focused),_setChildPopupState:S};return B}function It({isOpen:e,popupId:t,variant:o}){return{...o==="popover"?{"aria-haspopup":!0,"aria-controls":e&&t!=null?t:void 0}:o==="popper"?{"aria-describedby":e&&t!=null?t:void 0}:void 0}}function Ut(e){return{...It(e),onClick:e.open,onTouchStart:e.open}}function qt({isOpen:e,anchorEl:t,anchorPosition:o,close:s,popupId:h,onMouseLeave:g,disableAutoFocus:v,_openEventType:u}){return{id:h,anchorEl:t,anchorPosition:o,anchorReference:u==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:s,onMouseLeave:g,...v&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Ht(e,{popupId:t}){if(!t)return null;const o=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof o.getElementById=="function"?o.getElementById(t):null}function be(e,t){const{anchorEl:o,_childPopupState:s}=t;return Ie(o,e)||Ie(Ht(e,t),e)||s!=null&&be(e,s)}function Ie(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}function Xe({children:e,popupId:t,variant:o,parentPopupState:s,disableAutoFocus:h}){const g=kt({popupId:t,variant:o,parentPopupState:s,disableAutoFocus:h}),v=e(g);return v??null}Xe.propTypes={children:ee.func.isRequired,popupId:ee.string,variant:ee.oneOf(["popover","popper"]).isRequired,parentPopupState:ee.object,disableAutoFocus:ee.bool};var Xt={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},Dt=`\r
`,Gt="\uFEFF",we=e=>Object.assign({},Xt,e);class Jt extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class Kt extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class $t extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}var oe=e=>e,M=e=>e,le=oe,Y=oe,Ue=oe,qe=oe,Wt=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},Yt=e=>Ue(typeof e=="object"?e.key:e),Vt=e=>qe(typeof e=="object"?e.displayLabel:e),zt=(e,...t)=>t.reduce((o,s)=>s(o),e),Qt=e=>t=>e.useBom?le(M(t)+Gt):t,Zt=e=>t=>e.showTitle?Se(le(M(t)+e.title))(Y("")):t,Se=e=>t=>le(M(e)+M(t)+Dt),De=e=>(t,o)=>en(e)(Y(t+o)),en=e=>t=>oe(M(t)+e.fieldSeparator),tn=(e,t)=>o=>{if(!e.showColumnHeaders)return o;if(t.length<1)throw new Kt("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let s=Y("");for(let h=0;h<t.length;h++){const g=Vt(t[h]);s=De(e)(s,Ge(e,g))}return s=Y(M(s).slice(0,-1)),Se(o)(s)},nn=(e,t,o)=>s=>{let h=s;for(var g=0;g<o.length;g++){let v=Y("");for(let u=0;u<t.length;u++){const _=Yt(t[u]),d=typeof o[g][M(_)]>"u"?e.replaceUndefinedWith:o[g][M(_)];v=De(e)(v,Ge(e,d))}v=Y(M(v).slice(0,-1)),h=Se(h)(v)}return h},He=e=>+e===e&&(!isFinite(e)||!!(e%1)),Ge=(e,t)=>{if(e.decimalSeparator==="locale"&&He(t))return t.toLocaleString();if(e.decimalSeparator!=="."&&He(t))return t.toString().replace(".",e.decimalSeparator);if(typeof t=="string"){let o=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(o=e.quoteCharacter+Wt(t,e.quoteCharacter)+e.quoteCharacter),o}if(typeof t=="boolean"&&e.boolDisplay){const o=t?"true":"false";return e.boolDisplay[o]}return t},rn=e=>t=>{const o=we(e),s=o.useKeysAsHeaders?Object.keys(t[0]):o.columnHeaders;let h=zt(le(""),Qt(o),Zt(o),tn(o,s),nn(o,s,t));if(M(h).length<1)throw new Jt("Output is empty. Is your data formatted correctly?");return h},on=e=>t=>{if(!window)throw new $t("Downloading only supported in a browser environment.");const o=we(e),s=M(t),h=o.useTextFile?"plain":"csv",g=o.useTextFile?"txt":"csv";let v=new Blob([s],{type:`text/${h};charset=utf8;`}),u=document.createElement("a");u.download=`${o.filename}.${g}`,u.href=URL.createObjectURL(v),u.setAttribute("visibility","hidden"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},Je={};(function(e){(function(t,o){o(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:W,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;function o(a){return g(a)||h(a)||j(a)||s()}function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function g(a){if(Array.isArray(a))return l(a)}function v(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(a);n&&(b=b.filter(function(O){return Object.getOwnPropertyDescriptor(a,O).enumerable})),r.push.apply(r,b)}return r}function u(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?v(Object(r),!0).forEach(function(b){_(a,b,r[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(r,b))})}return a}function _(a,n,r){return n in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function d(a,n){return q(a)||x(a,n)||j(a,n)||p()}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(a,n){if(a){if(typeof a=="string")return l(a,n);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(a,n)}}function l(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,b=new Array(n);r<n;r++)b[r]=a[r];return b}function x(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var b=[],O=!0,C=!1,L,N;try{for(r=r.call(a);!(O=(L=r.next()).done)&&(b.push(L.value),!(n&&b.length===n));O=!0);}catch(k){C=!0,N=k}finally{try{!O&&r.return!=null&&r.return()}finally{if(C)throw N}}return b}}function q(a){if(Array.isArray(a))return a}function R(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(r){return typeof r}:R=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(a)}var S={ARRAY:"array",BOOLEAN:"boolean",DATE:"date",FUNCTION:"function",JSTOXML_OBJECT:"jstoxml-object",NULL:"null",NUMBER:"number",OBJECT:"object",STRING:"string"},B=[S.STRING,S.NUMBER,S.BOOLEAN],c='<?xml version="1.0" encoding="UTF-8"?>',i=["_selfCloseTag","_attrs"],T=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.repeat(r)},I=function(n){return Array.isArray(n)&&S.ARRAY||R(n)===S.OBJECT&&n!==null&&n._name&&S.JSTOXML_OBJECT||n instanceof Date&&S.DATE||n===null&&S.NULL||R(n)},H=function(n){return n.startsWith("<![CDATA[")},D=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=arguments.length>2?arguments[2]:void 0,O=n;if(R(n)===S.STRING){if(H(n))return n;var C=new RegExp("(".concat(Object.keys(r).join("|"),")(?!(\\w|#)*;)"),"g");O=String(n).replace(C,function(L,N){return r[N]||""})}return typeof b=="function"?b(O):O},E=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,O=arguments.length>3?arguments[3]:void 0,C=Array.isArray(n)?n:Object.entries(n).map(function(L){var N=d(L,2),k=N[0],X=N[1];return _({},k,X)});return C.reduce(function(L,N){var k=Object.keys(N)[0],X=N[k];if(R(b)===S.FUNCTION){var ie=b(k,X);if(ie)return L}var J=r?D(X,r):X,ce=!O&&J===!0?"":'="'.concat(J,'"');return L.push("".concat(k).concat(ce)),L},[])},f=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,O=arguments.length>3?arguments[3]:void 0,C=E(n,r,b,O);if(C.length===0)return"";var L=C.join(" ");return" ".concat(L)},m=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).map(function(r){return{_name:r,_content:n[r]}})},y=function(n){return B.includes(I(n))},F=function(n){return!n.match("<")},G=function(n){var r=n.header,b=n.isOutputStart,O=r&&b;if(!O)return"";var C=R(r)===S.BOOLEAN;return C?c:r},ae={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},Te=function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=r.depth,O=b===void 0?0:b,C=r.indent,L=r._isFirstItem,N=r._isOutputStart,k=N===void 0?!0:N,X=r.header,ie=r.attributeReplacements,J=ie===void 0?{}:ie,ce=r.attributeFilter,Ee=r.attributeExplicitTrue,We=Ee===void 0?!1:Ee,Oe=r.contentReplacements,fe=Oe===void 0?{}:Oe,je=r.contentMap,xe=r.selfCloseTags,Ye=xe===void 0?!0:xe,Ve=typeof J=="boolean"&&!J,ze=Ve?{}:u(u({},ae),J),Qe=typeof fe=="boolean"&&!fe,Ze=Qe?{}:u(u({},ae),fe),_e=typeof C=="string",de=T(C,O),et=I(n),Re=G({header:X,indent:C,depth:O,isOutputStart:k}),se=k&&!Re&&L&&O===0,Ce=_e&&!se?`
`:"",U="";switch(et){case S.JSTOXML_OBJECT:{var K=n._name,$=n._content;if($===null&&typeof je!="function"){U="".concat(Ce).concat(de).concat(K);break}var tt=Array.isArray($)&&$.every(y);if(tt){var nt=$.map(function(P){return a({_name:K,_content:P},u(u({},r),{},{depth:O,_isOutputStart:!1}))});return nt.join("")}if(i.includes(K))break;var V=a($,u(u({},r),{},{depth:O+1,_isOutputStart:se})),rt=I(V),ot=F(V),at=H(V),Ae="".concat(Ce).concat(de);if(K==="_comment"){U+="".concat(Ae,"<!-- ").concat($," -->");break}var Le=rt==="undefined"||V==="",it=Ye,Ne=n._selfCloseTag,Pe=R(Ne)===S.BOOLEAN?Le&&Ne:Le&&it,st=Pe?"/":"",ut=f(n._attrs,ze,ce,We),lt="<".concat(K).concat(ut).concat(st,">"),ct=_e&&!ot&&!at?`
`.concat(de):"",ft=Pe?"":"".concat(V).concat(ct,"</").concat(K,">");U+="".concat(Ae).concat(lt).concat(ft);break}case S.OBJECT:{var Be=Object.keys(n),dt=Be.map(function(P,z){var pe=u(u({},r),{},{_isFirstItem:z===0,_isLastItem:z+1===Be.length,_isOutputStart:se}),Q={_name:P};if(I(n[P])===S.OBJECT){i.forEach(function(me){var Me=n[P][me];typeof Me<"u"&&(Q[me]=Me,delete n[P][me])});var vt=typeof n[P]._content<"u";if(vt&&Object.keys(n[P]).length>1){var Fe=Object.assign({},n[P]);delete Fe._content,Q._content=[].concat(o(m(Fe)),[n[P]._content])}}typeof Q._content>"u"&&(Q._content=n[P]);var gt=a(Q,pe);return gt},r);U=dt.join("");break}case S.FUNCTION:{var pt=n(r);U=a(pt,r);break}case S.ARRAY:{var mt=n.map(function(P,z){var pe=u(u({},r),{},{_isFirstItem:z===0,_isLastItem:z+1===n.length,_isOutputStart:se});return a(P,pe)});U=mt.join("");break}default:{U=D(n,Ze,je);break}}return"".concat(Re).concat(U)};t.toXML=Te;var $e={toXML:Te};t.default=$e})})(Je);var Ke={exports:{}};(function(e,t){(function(o,s){s()})(W,function(){function o(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,p,j){var l=new XMLHttpRequest;l.open("GET",d),l.responseType="blob",l.onload=function(){_(l.response,p,j)},l.onerror=function(){console.error("could not download file")},l.send()}function h(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function g(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var v=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof W=="object"&&W.global===W?W:void 0,u=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=v.saveAs||(typeof window!="object"||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(d,p,j){var l=v.URL||v.webkitURL,x=document.createElement("a");p=p||d.name||"download",x.download=p,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?g(x):h(x.href)?s(d,p,j):g(x,x.target="_blank")):(x.href=l.createObjectURL(d),setTimeout(function(){l.revokeObjectURL(x.href)},4e4),setTimeout(function(){g(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,j){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(o(d,j),p);else if(h(d))s(d,p,j);else{var l=document.createElement("a");l.href=d,l.target="_blank",setTimeout(function(){g(l)})}}:function(d,p,j,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof d=="string")return s(d,p,j);var x=d.type==="application/octet-stream",q=/constructor/i.test(v.HTMLElement)||v.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||x&&q||u)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var i=S.result;i=R?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=i:location=i,l=null},S.readAsDataURL(d)}else{var B=v.URL||v.webkitURL,c=B.createObjectURL(d);l?l.location=c:location.href=c,l=null,setTimeout(function(){B.revokeObjectURL(c)},4e4)}});v.saveAs=_.saveAs=_,e.exports=_})})(Ke);var an=Ke.exports;const ge=yt(an),sn=({table:e,appId:t,metaData:o,bulkActions:s,storeTableSettings:h,refetch:g})=>{Z.debug(t,o);let v="csv";const[u,_]=A.useState(v),[d,p]=A.useState(!1),j=A.useMemo(()=>ht(),[]),l=e.getSelectedRowModel().rows;e.getAllColumns();const x=we({filename:t,fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),q=E=>{const f={};if(o.primary_key&&Array.isArray(o.primary_key))for(let m=0;m<o.primary_key.length;m++){const y=o.primary_key[m];f[y]=E[y]}return f},R=E=>{var f,m,y;for(let F=0;F<((f=o==null?void 0:o.columns)==null?void 0:f.length);F++)if(((m=o==null?void 0:o.columns[F])==null?void 0:m.column_name)===E)return(y=o==null?void 0:o.columns[F])==null?void 0:y.data_type;return"varchar"};A.useRef();const S=async()=>{},B=()=>{const E=l.map(m=>m.original),f=rn(x)(E);on(x)(f)},c=()=>{const E=l.map(f=>f.original);ge(new Blob([JSON.stringify(E)],{type:"text/json;charset=utf-8"}),t+".json")};A.useRef();const i=()=>{const E=l.map(m=>({row:m.original})),f=Je.toXML({table:E});ge(new Blob([f],{type:"text/plain;charset=utf-8"}),t+".xml")},T=()=>{const E=Tt(t);Z.debug(E);const f=l.map(y=>y.original);let m="insert into "+E.tbl+" (";for(const y in f[0])m+=y+",";m=m.slice(0,-1)+") values ";for(let y=0;y<f.length;y++){const F=f[y];m+="(";for(const G in F){const ae=Et(R(G));F[G]===null?m+="null,":ae==="number"?m+=F[G]+",":m+="'"+F[G]+"',"}m=m.slice(0,-1),m+="),"}m=m.slice(0,-1)+";",ge(new Blob([m],{type:"text/plain;charset=utf-8"}),t+".sql")},I=()=>{const E=l.map(f=>f.original);for(let f=0;f<E.length;f++){const m=q(E[f]);Ct(t,m,y=>{if(y!=null&&y.code&&(y!=null&&y.message))switch(y.code){case"ok":ue(y.message,{variant:"success"}),g();break;default:Z.error(y),ue(y.message??ve.contactSupport,{variant:"error"})}else Z.error(y),ue(ve.contactSupport,{variant:"error"})},y=>{Z.error("error",y),ue(y??ve.contactSupport,{variant:"error"})})}e.setRowSelection({})},H=()=>null,D=()=>null;return w.jsxs(w.Fragment,{children:[w.jsx(Xe,{variant:"popover",popupId:j,children:E=>{var f;return w.jsxs(ye,{children:[w.jsx(he,{variant:"contained",endIcon:w.jsx(_t,{}),...Ut(E),children:"Bulk Actions"}),w.jsx(Lt,{...qt(E),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:w.jsxs(ye,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[l.length===0&&w.jsx(Nt,{sx:{textAlign:"center",marginTop:"10px"},children:"No rows selected"}),w.jsxs(Bt,{value:u,onChange:(m,y)=>{_(y),m.stopPropagation()},children:[H(),s.csv&&w.jsx(te,{value:"csv",label:"Export to CSV",control:w.jsx(ne,{})}),s.json&&w.jsx(te,{value:"json",label:"Export to JSON",control:w.jsx(ne,{})}),D(),s.xml&&w.jsx(te,{value:"xml",label:"Export to XML",control:w.jsx(ne,{})}),s.sql&&!bt(t)&&w.jsx(te,{value:"sql",label:"Export to SQL",control:w.jsx(ne,{})}),((f=o==null?void 0:o.privs)==null?void 0:f.delete)&&!wt(o)&&(s==null?void 0:s.delete)===!0&&h.transactions.delete&&w.jsx(te,{value:"delete",label:"Delete permanently",control:w.jsx(ne,{})})]}),w.jsx(he,{variant:"contained",onClick:()=>{switch(u){case"pdf":S();break;case"csv":B();break;case"json":c();break;case"excel":break;case"xml":i();break;case"sql":T();break;case"delete":p(!0);break}},disabled:l.length===0,children:"Apply"})]})})]})}}),w.jsx(At,{title:"Delete selected row?",message:"Are you sure you want to delete the selected row? This action cannot be undone!",open:d,setOpen:p,onConfirm:()=>{I()},theme:St})]})},En=({table:e,metaData:t,appId:o,bulkActions:s,hasBulkActions:h,storeTableSettings:g,refetch:v,showForm:u})=>{var _;return w.jsxs(ye,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[w.jsx(Ot,{arrow:!0,title:"Refresh Table",className:"ppToolbarRefreshIcon",children:w.jsx(Pt,{onClick:()=>v(),children:w.jsx(jt,{})})}),((_=g==null?void 0:g.transactions)==null?void 0:_.insert)&&w.jsx(he,{variant:"contained",startIcon:w.jsx(Rt,{}),onClick:()=>{u(null,xt.INSERT)},children:"New Record"}),h&&w.jsx(sn,{table:e,appId:o,metaData:t,bulkActions:s,storeTableSettings:g,refetch:v})]})};export{En as default};
