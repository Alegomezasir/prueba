import{l as b,bw as Q,r as e,j as r,_ as O}from"./main-1.0.4.js";import{l as U}from"./ActionsDml-1.0.4-1a4856d6.js";import{b as X,as as Y}from"./main-1.0.4-3f927327.js";import{i as Z}from"./index-1.0.4-57a42597.js";import{F as $,A as u,T as l,a as N}from"./TextField-1.0.4-6b1bbbfd.js";import"./iconBase-1.0.4-684ba590.js";import"./Close-1.0.4-ca2bff70.js";const I=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,storeForm:y,formMode:x})=>{var H,F;b.debug(v,d,E,A,p,i,L,s,y,x);const j=X(_=>Q(_,v));b.debug("data",j);const[k,W]=e.useState([]);b.debug("lov",k);const[R,w]=e.useState(Array.isArray((H=i.lookup)==null?void 0:H.dynamicConditions)?(F=i.lookup)==null?void 0:F.dynamicConditions.map(_=>({columnName:_.tableColumnName,columnValue:""})):[]);b.debug("conditions",R),e.useEffect(()=>{var _,P;Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)&&((P=i.lookup)==null||P.dynamicConditions.map(h=>{j[h.tableColumnName]===void 0&&b.error("Invalid lookup: column "+h.tableColumnName+" in dynamic condition not found.")})),R.length===0&&T()},[]),e.useEffect(()=>{var _,P;if(Object.keys(R).length>0){const h=Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)?(P=i.lookup)==null?void 0:P.dynamicConditions.map(S=>({columnName:S.lookupColumnName,columnValue:j[S.tableColumnName]??""})):[];if(b.debug(h),!Z(R,h)){const S={};h.length>0&&h.map(g=>{S[g.columnName]=g.columnValue}),b.debug("reloading dynamic lookup",d,h),T(S),w(h)}}},[j]);const T=(_={})=>{var P,h;U(v,"form",d,((P=i.lookup)==null?void 0:P.key)??"",((h=i.lookup)==null?void 0:h.value)??"",_,S=>{var g,t,c;if(b.debug(S.data),!((g=i.lookup)!=null&&g.value.includes(",")))W(S.data);else{const G=(t=i.lookup)==null?void 0:t.value.split(","),q=[];for(let z=0;z<S.data.length;z++){const J=G.map(K=>S.data[z][K]).join(((c=i.lookup)==null?void 0:c.delimiter)??"");q.push({key:S.data[z].key,value:J})}W(q)}},S=>{b.error(S)})},B=e.useMemo(()=>k.filter(_=>_.key===E)[0]??null,[E,k]);return r.jsxs($,{fullWidth:!0,children:[r.jsx(u,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:k,getOptionLabel:_=>Array.isArray(_.value)?_.value[0]:_.value,value:B,onChange:(_,P)=>{P!==null?f(d,P==null?void 0:P.key):f(d,null)},renderInput:_=>r.jsx(l,{label:p.formLabel,required:p.is_nullable==="NO",..._,inputProps:{..._.inputProps,autoComplete:"new-password"}})}),r.jsx(N,{children:Y(i,"Select a value from the list or start typing")})]})},M=e.lazy(()=>O(()=>import("./FieldText-1.0.4-3b3a2f9c.js"),["./FieldText-1.0.4-3b3a2f9c.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./InputAdornment-1.0.4-7c5d0d8f.js"],import.meta.url)),n=e.lazy(()=>O(()=>import("./FieldTextarea-1.0.4-fc970665.js"),["./FieldTextarea-1.0.4-fc970665.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js"],import.meta.url)),C=e.lazy(()=>O(()=>import("./FieldNumber-1.0.4-6787f268.js"),["./FieldNumber-1.0.4-6787f268.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./InputAdornment-1.0.4-7c5d0d8f.js"],import.meta.url)),V=e.lazy(()=>O(()=>import("./FieldSet-1.0.4-65099ba4.js"),["./FieldSet-1.0.4-65099ba4.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./MenuItem-1.0.4-50d14a51.js"],import.meta.url)),D=e.lazy(()=>O(()=>import("./FieldEnum-1.0.4-1638269e.js"),["./FieldEnum-1.0.4-1638269e.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./MenuItem-1.0.4-50d14a51.js","./EnumTypeEnum-1.0.4-7ffcf33a.js","./RadioGroup-1.0.4-078a1a14.js","./Radio-1.0.4-bd38ebb7.js","./FormControlLabel-1.0.4-64c2f78b.js"],import.meta.url)),o=e.lazy(()=>O(()=>import("./FieldDate-1.0.4-c83ee123.js"),["./FieldDate-1.0.4-c83ee123.js","./main-1.0.4.js","./dayjs.min-1.0.4-2ecacb3f.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./vi-1.0.4-f5e66e81.js","./useMobilePicker-1.0.4-98bcd65f.js","./DialogContent-1.0.4-604ea0cd.js","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./InputAdornment-1.0.4-7c5d0d8f.js","./CardContent-1.0.4-55ef4296.js","./AdapterDayjs-1.0.4-a00b3fb4.js","./DatePicker-1.0.4-29fd3332.js","./dateViewRenderers-1.0.4-e82b214f.js","./colorManipulator-1.0.4-6ca57637.js"],import.meta.url)),m=e.lazy(()=>O(()=>import("./FieldDatetime-1.0.4-5ec3c3a1.js"),["./FieldDatetime-1.0.4-5ec3c3a1.js","./main-1.0.4.js","./dayjs.min-1.0.4-2ecacb3f.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./vi-1.0.4-f5e66e81.js","./useMobilePicker-1.0.4-98bcd65f.js","./DialogContent-1.0.4-604ea0cd.js","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./InputAdornment-1.0.4-7c5d0d8f.js","./CardContent-1.0.4-55ef4296.js","./AdapterDayjs-1.0.4-a00b3fb4.js","./DateTimePicker-1.0.4-20c15877.js","./Tabs-1.0.4-276a4db7.js","./date-time-utils-1.0.4-cff519f0.js","./MenuItem-1.0.4-50d14a51.js","./colorManipulator-1.0.4-6ca57637.js","./dateViewRenderers-1.0.4-e82b214f.js"],import.meta.url)),a=e.lazy(()=>O(()=>import("./FieldTime-1.0.4-ba037f24.js"),["./FieldTime-1.0.4-ba037f24.js","./main-1.0.4.js","./dayjs.min-1.0.4-2ecacb3f.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./vi-1.0.4-f5e66e81.js","./useMobilePicker-1.0.4-98bcd65f.js","./DialogContent-1.0.4-604ea0cd.js","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./InputAdornment-1.0.4-7c5d0d8f.js","./CardContent-1.0.4-55ef4296.js","./AdapterDayjs-1.0.4-a00b3fb4.js","./TimePicker-1.0.4-46bc9359.js","./date-time-utils-1.0.4-cff519f0.js","./MenuItem-1.0.4-50d14a51.js","./colorManipulator-1.0.4-6ca57637.js"],import.meta.url)),ii=e.lazy(()=>O(()=>import("./FieldCheckbox-1.0.4-a0054494.js"),["./FieldCheckbox-1.0.4-a0054494.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./FormControlLabel-1.0.4-64c2f78b.js","./Checkbox-1.0.4-04061c16.js"],import.meta.url)),si=e.lazy(()=>O(()=>import("./ColumnWpMedia-1.0.4-82207da4.js"),["./ColumnWpMedia-1.0.4-82207da4.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./index.esm-1.0.4-1e92c0c7.js","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./CardContent-1.0.4-55ef4296.js"],import.meta.url)),ri=e.lazy(()=>O(()=>import("./ColumnHyperlink-1.0.4-2fd6a098.js"),["./ColumnHyperlink-1.0.4-2fd6a098.js","./main-1.0.4.js","./main-1.0.4-3f927327.js","./iconBase-1.0.4-684ba590.js","./main-1.0.4-ca6efa15.css","./TextField-1.0.4-6b1bbbfd.js","./Close-1.0.4-ca2bff70.js","./FormControlLabel-1.0.4-64c2f78b.js","./Checkbox-1.0.4-04061c16.js"],import.meta.url)),Ei=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})=>{if(b.debug(v,d,E,A,p,i,s,y,x,j),s!=null&&s.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[d]))return r.jsx(e.Suspense,{children:r.jsx(si,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k,columnMedia:y==null?void 0:y.media[d],mediaType:s==null?void 0:s.media[d]})});if((s==null?void 0:s.media[d])==="HyperlinkObject")return r.jsx(e.Suspense,{children:r.jsx(ri,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}else{if(p.column_type.toLowerCase()==="tinyint(1)")return r.jsx(e.Suspense,{children:r.jsx(ii,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});if(i.lookup!==void 0)return r.jsx(I,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})}switch(p.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return r.jsx(e.Suspense,{children:r.jsx(C,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"enum":return r.jsx(e.Suspense,{children:r.jsx(D,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"set":return r.jsx(e.Suspense,{children:r.jsx(V,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"time":return r.jsx(e.Suspense,{children:r.jsx(a,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"date":return r.jsx(e.Suspense,{children:r.jsx(o,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"datetime":case"timestamp":return r.jsx(e.Suspense,{children:r.jsx(m,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"tinytext":case"text":case"mediumtext":case"longtext":return r.jsx(e.Suspense,{children:r.jsx(n,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});default:return r.jsx(e.Suspense,{children:r.jsx(M,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}};export{Ei as default};
