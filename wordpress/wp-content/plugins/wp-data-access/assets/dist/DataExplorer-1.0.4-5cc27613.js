import{r as p,j as t,_ as Y,l as b,L as ys,M as Ts,C as _,N as Cs,O as Ss,Q as vs,S as Es,T as ws,U as Rs,V as Ps,W as _s,X as Ms,Y as ks,Z as Ae,$ as Ls,a0 as As,a1 as Ds,a2 as Os,a3 as Fs,a4 as Ns,a5 as Vs,a6 as zs,a7 as Bs,a8 as Ks,a9 as Gs,aa as $s,ab as Rt,ac as pt,ad as De,ae as Oe,af as Be,ag as Pt,ah as Us,ai as Ws,aj as _t,ak as Hs,al as gt,F as me,am as Mt,an as Xs,ao as qs,e as w,ap as pe,aq as Ke,ar as Js,R as Se,as as Ys,at as Qs,au as Fe,av as rt,aw as Ge,ax as Zs,ay as ht,P as en,k as bt,m as tn}from"./main-1.0.4.js";import{l as sn,a as nn,b as rn,c as on,d as an,e as ln,f as cn,g as dn,h as un,s as pn}from"./ActionsExplorer-1.0.4-d9d7ac7b.js";import{w as gn,x as mn,y as xn,z as ve,B as C,C as fn,u as F,b as P,M as X,E as ke,F as hn,G as bn,f as jn,g as In,H as yn,o as Tn,I as Cn,A as kt,d as Lt,S as mt,v as Sn,a as At,R as We,T as vn,e as En,n as wn}from"./main-1.0.4-3f927327.js";import{g as Dt,a as Ot,_ as R,u as Pe,b as ne,c as Rn,d as J,s as He,e as Ft,f as Nt,h as Vt,r as de,T as xe,I as ge}from"./iconBase-1.0.4-684ba590.js";import{u as Ie,M as ye}from"./index.esm-1.0.4-862c3851.js";import{b as zt,c as Bt,B as Kt,d as Pn}from"./index.esm-1.0.4-53f8e071.js";import{T as _n,a as Mn}from"./index.esm-1.0.4-15c38c3e.js";import{f as kn,a as re,T as nt,C as Re,g as Ln,S as _e,R as An,B as Dn,b as On,c as Fn,d as Nn,e as jt}from"./TabPanel-1.0.4-14af6bd6.js";import{c as Gt}from"./Close-1.0.4-ca2bff70.js";import{P as It}from"./DialogContent-1.0.4-604ea0cd.js";import{a as Ne}from"./colorManipulator-1.0.4-6ca57637.js";import{A as $e,a as Vn}from"./AdminTheme-1.0.4-e85d4fc0.js";import{L as ue}from"./Link-1.0.4-4f39d399.js";import{C as ot,a as at,B as z}from"./CardContent-1.0.4-55ef4296.js";import{C as zn,a as Bn}from"./index-1.0.4-e7535e92.js";import{F as $,b as U,T as ae,a as fe,I as it,S as lt,A as yt}from"./TextField-1.0.4-6b1bbbfd.js";import{C as Ve}from"./Checkbox-1.0.4-04061c16.js";import{C as Kn}from"./CardActions-1.0.4-7d413e01.js";import{I as Tt}from"./InputAdornment-1.0.4-7c5d0d8f.js";import{A as Gn}from"./AdminMetaData-1.0.4-39f61a60.js";import{S as $n}from"./ScopeEnum-1.0.4-3d855cbf.js";import{A as he,a as be,b as je}from"./AccordionSummary-1.0.4-dffa253b.js";import{R as $t}from"./RadioGroup-1.0.4-078a1a14.js";import{R as Ue}from"./Radio-1.0.4-bd38ebb7.js";import{M as K}from"./MenuItem-1.0.4-50d14a51.js";import{c as Un}from"./index-1.0.4-6dbd728b.js";import{F as Me}from"./FormControlLabel-1.0.4-64c2f78b.js";import{F as Wn}from"./index.esm-1.0.4-1e92c0c7.js";import{g as Hn}from"./ActionsDml-1.0.4-1a4856d6.js";import{T as Ct}from"./Tabs-1.0.4-276a4db7.js";import"./AlertTitle-1.0.4-103cc369.js";import"./useSlot-1.0.4-77de692c.js";import"./DateTimePicker-1.0.4-20c15877.js";import"./useMobilePicker-1.0.4-98bcd65f.js";import"./date-time-utils-1.0.4-cff519f0.js";import"./dateViewRenderers-1.0.4-e82b214f.js";import"./TimePicker-1.0.4-46bc9359.js";import"./DatePicker-1.0.4-29fd3332.js";function Xn(e){return Dt("MuiSimpleTreeView",e)}Ot("MuiSimpleTreeView",["root"]);const qn=(e,s)=>{const r=p.useRef({}),[n,i]=p.useState(()=>{const c={};return e.forEach(l=>{l.models&&Object.entries(l.models).forEach(([u,f])=>{r.current[u]={isControlled:s[u]!==void 0,getDefaultValue:f.getDefaultValue},c[u]=f.getDefaultValue(s)})}),c});return Object.fromEntries(Object.entries(r.current).map(([c,l])=>{const u=l.isControlled?s[c]:n[c];return[c,{value:u,setControlledValue:f=>{l.isControlled||i(d=>R({},d,{[c]:f}))}}]}))};class Jn{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(s,r,n={}){let i=this.events[s];i||(i={highPriority:new Map,regular:new Map},this.events[s]=i),n.isFirst?i.highPriority.set(r,!0):i.regular.set(r,!0)}removeListener(s,r){this.events[s]&&(this.events[s].regular.delete(r),this.events[s].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(s,...r){const n=this.events[s];if(!n)return;const i=Array.from(n.highPriority.keys()),a=Array.from(n.regular.keys());for(let c=i.length-1;c>=0;c-=1){const l=i[c];n.highPriority.has(l)&&l.apply(this,r)}for(let c=0;c<a.length;c+=1){const l=a[c];n.regular.has(l)&&l.apply(this,r)}}once(s,r){const n=this;this.on(s,function i(...a){n.removeListener(s,i),r.apply(n,a)})}}const Yn=(e,s)=>{const r=e.getNode(s),n=e.getNavigableChildrenIds(r.parentId),i=n.indexOf(s);if(i===0)return r.parentId;let a=n[i-1];for(;e.isItemExpanded(a)&&e.getNavigableChildrenIds(a).length>0;)a=e.getNavigableChildrenIds(a).pop();return a},ct=(e,s)=>{if(e.isItemExpanded(s)&&e.getNavigableChildrenIds(s).length>0)return e.getNavigableChildrenIds(s)[0];let r=e.getNode(s);for(;r!=null;){const n=e.getNavigableChildrenIds(r.parentId),i=n[n.indexOf(r.id)+1];if(i)return i;r=e.getNode(r.parentId)}return null},dt=e=>{let s=e.getNavigableChildrenIds(null).pop();for(;e.isItemExpanded(s);)s=e.getNavigableChildrenIds(s).pop();return s},ut=e=>e.getNavigableChildrenIds(null)[0],Z=(e,s)=>{Object.assign(e,s)},Ut=(e,s)=>{Object.assign(e,s)},Qn=e=>e.isPropagationStopped!==void 0,Wt=({instance:e})=>{const[s]=p.useState(()=>new Jn),r=p.useCallback((...i)=>{const[a,c,l={}]=i;l.defaultMuiPrevented=!1,!(Qn(l)&&l.isPropagationStopped())&&s.emit(a,c,l)},[s]),n=p.useCallback((i,a)=>(s.on(i,a),()=>{s.removeListener(i,a)}),[s]);Z(e,{$$publishEvent:r,$$subscribeEvent:n})};Wt.params={};const Zn=[Wt];function er(e){const s=p.useRef({});return e?(e.current==null&&(e.current={}),e.current):s.current}const tr=e=>{const s=[...Zn,...e.plugins],r=s.reduce((h,T)=>T.getDefaultizedParams?T.getDefaultizedParams(h):h,e),n=qn(s,r),a=p.useRef({}).current,c=er(e.apiRef),l=p.useRef(null),u=Pe(l,e.rootRef),[f,d]=p.useState(()=>{const h={};return s.forEach(T=>{T.getInitialState&&Object.assign(h,T.getInitialState(r))}),h}),o=[],x={publicAPI:c,instance:a},j=h=>{const T=h({instance:a,publicAPI:c,params:r,slots:r.slots,slotProps:r.slotProps,state:f,setState:d,rootRef:l,models:n})||{};T.getRootProps&&o.push(T.getRootProps),T.contextValue&&Object.assign(x,T.contextValue)};s.forEach(j),x.runItemPlugins=h=>{let T=null,E=null;return s.forEach(v=>{if(!v.itemPlugin)return;const y=v.itemPlugin({props:h,rootRef:T,contentRef:E});y!=null&&y.rootRef&&(T=y.rootRef),y!=null&&y.contentRef&&(E=y.contentRef)}),{contentRef:E,rootRef:T}};const g=s.map(h=>h.wrapItem).filter(h=>!!h);return x.wrapItem=({itemId:h,children:T})=>{let E=T;return g.forEach(v=>{E=v({itemId:h,children:E})}),E},{getRootProps:(h={})=>{const T=R({role:"tree"},h,{ref:u});return o.forEach(E=>{Object.assign(T,E(h))}),T},rootRef:u,contextValue:x,instance:a}},Ht=p.createContext(null),sr=["element"];function nr(e,s){let r=0,n=e.length-1;for(;r<=n;){const i=Math.floor((r+n)/2);if(e[i].element===s)return i;e[i].element.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING?n=i-1:r=i+1}return r}const Xt=p.createContext({});function rr(e){const s=p.useRef(null);return p.useEffect(()=>{s.current=e},[e]),s.current}const St=()=>{};function or(e){const[,s]=p.useState(),{registerDescendant:r=St,unregisterDescendant:n=St,descendants:i=[],parentId:a=null}=p.useContext(Xt),c=i.findIndex(f=>f.element===e.element),l=rr(i),u=i.some((f,d)=>l&&l[d]&&l[d].element!==f.element);return Rn(()=>{if(e.element)return r(R({},e,{index:c})),()=>{n(e.element)};s({})},[r,n,c,u,e]),{parentId:a,index:c}}function qt(e){const{children:s,id:r}=e,[n,i]=p.useState([]),a=p.useCallback(u=>{let{element:f}=u,d=ne(u,sr);i(o=>{if(o.length===0)return[R({},d,{element:f,index:0})];const x=nr(o,f);let j;if(o[x]&&o[x].element===f)j=o;else{const g=R({},d,{element:f,index:x});j=o.slice(),j.splice(x,0,g)}return j.forEach((g,m)=>{g.index=m}),j})},[]),c=p.useCallback(u=>{i(f=>f.filter(d=>u!==d.element))},[]),l=p.useMemo(()=>({descendants:n,registerDescendant:a,unregisterDescendant:c,parentId:r}),[n,a,c,r]);return t.jsx(Xt.Provider,{value:l,children:s})}function ar(e){const{value:s,children:r}=e;return t.jsx(Ht.Provider,{value:s,children:t.jsx(qt,{children:r})})}const Jt=({instance:e,params:s})=>{const r=gn(s.id),n=p.useCallback((i,a)=>a??`${r}-${i}`,[r]);return Z(e,{getTreeItemId:n}),{getRootProps:()=>({id:r})}};Jt.params={id:!0};const Yt=(e,s,r)=>{e.$$publishEvent(s,r)},Qt=({items:e,isItemDisabled:s,getItemLabel:r,getItemId:n})=>{const i={},a={},c=(u,f,d)=>{var j,g;const o=n?n(u):u.id;if(o==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(u)].join(`
`));if(i[o]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Tow items were provided with the same id in the \`items\` prop: "${o}"`].join(`
`));const x=r?r(u):u.label;if(x==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(u)].join(`
`));return i[o]={id:o,label:x,index:f,parentId:d,idAttribute:void 0,expandable:!!((j=u.children)!=null&&j.length),disabled:s?s(u):!1},a[o]=u,{id:o,children:(g=u.children)==null?void 0:g.map((m,h)=>c(m,h,o))}},l=e.map((u,f)=>c(u,f,null));return{nodeMap:i,nodeTree:l,itemMap:a}},Xe=({instance:e,publicAPI:s,params:r,state:n,setState:i})=>{const a=p.useCallback(g=>n.items.nodeMap[g],[n.items.nodeMap]),c=p.useCallback(g=>n.items.itemMap[g],[n.items.itemMap]),l=p.useCallback(g=>{if(g==null)return!1;let m=e.getNode(g);if(!m)return!1;if(m.disabled)return!0;for(;m.parentId!=null;)if(m=e.getNode(m.parentId),m.disabled)return!0;return!1},[e]),u=p.useCallback(g=>Object.values(n.items.nodeMap).filter(m=>m.parentId===g).sort((m,h)=>m.index-h.index).map(m=>m.id),[n.items.nodeMap]),f=g=>{let m=e.getChildrenIds(g);return r.disabledItemsFocusable||(m=m.filter(h=>!e.isItemDisabled(h))),m},d=p.useRef(!1),o=p.useCallback(()=>{d.current=!0},[]),x=p.useCallback(()=>d.current,[]);return p.useEffect(()=>{e.areItemUpdatesPrevented()||i(g=>{const m=Qt({items:r.items,isItemDisabled:r.isItemDisabled,getItemId:r.getItemId,getItemLabel:r.getItemLabel});return Object.values(g.items.nodeMap).forEach(h=>{m.nodeMap[h.id]||Yt(e,"removeItem",{id:h.id})}),R({},g,{items:m})})},[e,i,r.items,r.isItemDisabled,r.getItemId,r.getItemLabel]),Z(e,{getNode:a,getItem:c,getItemsToRender:()=>{const g=({id:m,children:h})=>{const T=n.items.nodeMap[m];return{label:T.label,itemId:T.id,id:T.idAttribute,children:h==null?void 0:h.map(g)}};return n.items.nodeTree.map(g)},getChildrenIds:u,getNavigableChildrenIds:f,isItemDisabled:l,preventItemUpdates:o,areItemUpdatesPrevented:x}),Ut(s,{getItem:c}),{contextValue:{disabledItemsFocusable:r.disabledItemsFocusable}}};Xe.getInitialState=e=>({items:Qt({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});Xe.getDefaultizedParams=e=>R({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1});Xe.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0};const qe=({instance:e,params:s,models:r})=>{const n=(u,f)=>{var d;(d=s.onExpandedItemsChange)==null||d.call(s,u,f),r.expandedItems.setControlledValue(f)},i=p.useCallback(u=>Array.isArray(r.expandedItems.value)?r.expandedItems.value.indexOf(u)!==-1:!1,[r.expandedItems.value]),a=p.useCallback(u=>{var f;return!!((f=e.getNode(u))!=null&&f.expandable)},[e]),c=J((u,f)=>{if(f==null)return;const d=r.expandedItems.value.indexOf(f)!==-1;let o;d?o=r.expandedItems.value.filter(x=>x!==f):o=[f].concat(r.expandedItems.value),s.onItemExpansionToggle&&s.onItemExpansionToggle(u,f,!d),n(u,o)});Z(e,{isItemExpanded:i,isItemExpandable:a,toggleItemExpansion:c,expandAllSiblings:(u,f)=>{const d=e.getNode(f),x=e.getChildrenIds(d.parentId).filter(g=>e.isItemExpandable(g)&&!e.isItemExpanded(g)),j=r.expandedItems.value.concat(x);x.length>0&&(s.onItemExpansionToggle&&x.forEach(g=>{s.onItemExpansionToggle(u,g,!0)}),n(u,j))}})};qe.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const ir=[];qe.getDefaultizedParams=e=>R({},e,{defaultExpandedItems:e.defaultExpandedItems??ir});qe.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0};const lr=(e,s,r)=>{if(s===r)return[s,r];const n=e.getNode(s),i=e.getNode(r);if(n.parentId===i.id||i.parentId===n.id)return i.parentId===n.id?[n.id,i.id]:[i.id,n.id];const a=[n.id],c=[i.id];let l=n.parentId,u=i.parentId,f=c.indexOf(l)!==-1,d=a.indexOf(u)!==-1,o=!0,x=!0;for(;!d&&!f;)o&&(a.push(l),f=c.indexOf(l)!==-1,o=l!==null,!f&&o&&(l=e.getNode(l).parentId)),x&&!f&&(c.push(u),d=a.indexOf(u)!==-1,x=u!==null,!d&&x&&(u=e.getNode(u).parentId));const j=f?l:u,g=e.getChildrenIds(j),m=a[a.indexOf(j)-1],h=c[c.indexOf(j)-1];return g.indexOf(m)<g.indexOf(h)?[s,r]:[r,s]},Je=({instance:e,params:s,models:r})=>{const n=p.useRef(null),i=p.useRef(!1),a=p.useRef([]),c=(m,h)=>{if(s.onItemSelectionToggle)if(s.multiSelect){const T=h.filter(v=>!e.isItemSelected(v)),E=r.selectedItems.value.filter(v=>!h.includes(v));T.forEach(v=>{s.onItemSelectionToggle(m,v,!0)}),E.forEach(v=>{s.onItemSelectionToggle(m,v,!1)})}else h!==r.selectedItems.value&&(r.selectedItems.value!=null&&s.onItemSelectionToggle(m,r.selectedItems.value,!1),h!=null&&s.onItemSelectionToggle(m,h,!0));s.onSelectedItemsChange&&s.onSelectedItemsChange(m,h),r.selectedItems.setControlledValue(h)},l=m=>Array.isArray(r.selectedItems.value)?r.selectedItems.value.indexOf(m)!==-1:r.selectedItems.value===m,u=(m,h,T=!1)=>{if(!s.disableSelection){if(T){if(Array.isArray(r.selectedItems.value)){let E;r.selectedItems.value.indexOf(h)!==-1?E=r.selectedItems.value.filter(v=>v!==h):E=[h].concat(r.selectedItems.value),c(m,E)}}else{const E=s.multiSelect?[h]:h;c(m,E)}n.current=h,i.current=!1,a.current=[]}},f=(m,h)=>{const[T,E]=lr(e,m,h),v=[T];let y=T;for(;y!==E;)y=ct(e,y),v.push(y);return v},d=(m,h)=>{let T=r.selectedItems.value.slice();const{start:E,next:v,current:y}=h;!v||!y||(a.current.indexOf(y)===-1&&(a.current=[]),i.current?a.current.indexOf(v)!==-1?(T=T.filter(S=>S===E||S!==y),a.current=a.current.filter(S=>S===E||S!==y)):(T.push(v),a.current.push(v)):(T.push(v),a.current.push(y,v)),c(m,T))},o=(m,h)=>{let T=r.selectedItems.value.slice();const{start:E,end:v}=h;i.current&&(T=T.filter(M=>a.current.indexOf(M)===-1));let y=f(E,v);y=y.filter(M=>!e.isItemDisabled(M)),a.current=y;let S=T.concat(y);S=S.filter((M,O)=>S.indexOf(M)===O),c(m,S)};return Z(e,{isItemSelected:l,selectItem:u,selectRange:(m,h,T=!1)=>{if(s.disableSelection)return;const{start:E=n.current,end:v,current:y}=h;T?d(m,{start:E,next:v,current:y}):E!=null&&v!=null&&o(m,{start:E,end:v}),i.current=!0},rangeSelectToLast:(m,h)=>{n.current||(n.current=h);const T=i.current?n.current:h;e.selectRange(m,{start:T,end:dt(e)})},rangeSelectToFirst:(m,h)=>{n.current||(n.current=h);const T=i.current?n.current:h;e.selectRange(m,{start:T,end:ut(e)})}}),{getRootProps:()=>({"aria-multiselectable":s.multiSelect}),contextValue:{selection:{multiSelect:s.multiSelect}}}};Je.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const cr=[];Je.getDefaultizedParams=e=>R({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?cr:null)});Je.params={disableSelection:!0,multiSelect:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const vt=1e3;class dr{constructor(s=vt){this.timeouts=new Map,this.cleanupTimeout=vt,this.cleanupTimeout=s}register(s,r,n){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,i)}unregister(s){const r=this.timeouts.get(s.cleanupToken);r&&(this.timeouts.delete(s.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((s,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class ur{constructor(){this.registry=new FinalizationRegistry(s=>{typeof s=="function"&&s()})}register(s,r,n){this.registry.register(s,r,n)}unregister(s){this.registry.unregister(s)}reset(){}}class pr{}function gr(e){let s=0;return function(n,i,a){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new ur:new dr);const[c]=p.useState(new pr),l=p.useRef(null),u=p.useRef();u.current=a;const f=p.useRef(null);if(!l.current&&u.current){const d=(o,x)=>{var j;x.defaultMuiPrevented||(j=u.current)==null||j.call(u,o,x)};l.current=n.$$subscribeEvent(i,d),s+=1,f.current={cleanupToken:s},e.registry.register(c,()=>{var o;(o=l.current)==null||o.call(l),l.current=null,f.current=null},f.current)}else!u.current&&l.current&&(l.current(),l.current=null,f.current&&(e.registry.unregister(f.current),f.current=null));p.useEffect(()=>{if(!l.current&&u.current){const d=(o,x)=>{var j;x.defaultMuiPrevented||(j=u.current)==null||j.call(u,o,x)};l.current=n.$$subscribeEvent(i,d)}return f.current&&e.registry&&(e.registry.unregister(f.current),f.current=null),()=>{var d;(d=l.current)==null||d.call(l),l.current=null}},[n,i])}}const mr={registry:null},xr=gr(mr),Zt=(e=document)=>{const s=e.activeElement;return s?s.shadowRoot?Zt(s.shadowRoot):s:null},fr=(e,s)=>{const r=i=>{const a=e.getNode(i);return a&&(a.parentId==null||e.isItemExpanded(a.parentId))};let n;return Array.isArray(s)?n=s.find(r):s!=null&&r(s)&&(n=s),n==null&&(n=e.getNavigableChildrenIds(null)[0]),n},xt=({instance:e,publicAPI:s,params:r,state:n,setState:i,models:a,rootRef:c})=>{const l=fr(e,a.selectedItems.value),u=J(y=>{const S=typeof y=="function"?y(n.focusedItemId):y;n.focusedItemId!==S&&i(M=>R({},M,{focusedItemId:S}))}),f=p.useCallback(()=>!!c.current&&c.current.contains(Zt(mn(c.current))),[c]),d=p.useCallback(y=>n.focusedItemId===y&&f(),[n.focusedItemId,f]),o=y=>{const S=e.getNode(y);return S&&(S.parentId==null||e.isItemExpanded(S.parentId))},x=(y,S)=>{const M=e.getNode(S),O=document.getElementById(e.getTreeItemId(S,M.idAttribute));O&&O.focus(),u(S),r.onItemFocus&&r.onItemFocus(y,S)},j=J((y,S)=>{o(S)&&x(y,S)}),g=J(y=>{let S;Array.isArray(a.selectedItems.value)?S=a.selectedItems.value.find(o):a.selectedItems.value!=null&&o(a.selectedItems.value)&&(S=a.selectedItems.value),S==null&&(S=e.getNavigableChildrenIds(null)[0]),x(y,S)}),m=J(()=>{if(n.focusedItemId==null)return;const y=e.getNode(n.focusedItemId);if(y){const S=document.getElementById(e.getTreeItemId(n.focusedItemId,y.idAttribute));S&&S.blur()}u(null)});Z(e,{isItemFocused:d,canItemBeTabbed:y=>y===l,focusItem:j,focusDefaultItem:g,removeFocusedItem:m}),Ut(s,{focusItem:j}),xr(e,"removeItem",({id:y})=>{n.focusedItemId===y&&e.focusDefaultItem(null)});const T=y=>S=>{var M;(M=y.onFocus)==null||M.call(y,S),S.target===S.currentTarget&&e.focusDefaultItem(S)},E=e.getNode(n.focusedItemId),v=E?e.getTreeItemId(E.id,E.idAttribute):null;return{getRootProps:y=>({onFocus:T(y),"aria-activedescendant":v??void 0})}};xt.getInitialState=()=>({focusedItemId:null});xt.params={onItemFocus:!0};function hr(e){return!!e&&e.length===1&&!!e.match(/\S/)}function Et(e,s,r){for(let n=s;n<e.length;n+=1)if(r===e[n])return n;return-1}const es=({instance:e,params:s,state:r})=>{const i=xn().direction==="rtl",a=p.useRef({}),c=J(o=>{a.current=o(a.current)});p.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const o={},x=j=>{o[j.id]=j.label.substring(0,1).toLowerCase()};Object.values(r.items.nodeMap).forEach(x),a.current=o},[r.items.nodeMap,s.getItemId,e]);const l=(o,x)=>{let j,g;const m=x.toLowerCase(),h=[],T=[];return Object.keys(a.current).forEach(E=>{const v=e.getNode(E),y=v.parentId?e.isItemExpanded(v.parentId):!0,S=s.disabledItemsFocusable?!1:e.isItemDisabled(E);y&&!S&&(h.push(E),T.push(a.current[E]))}),j=h.indexOf(o)+1,j>=h.length&&(j=0),g=Et(T,j,m),g===-1&&(g=Et(T,0,m)),g>-1?h[g]:null},u=o=>!s.disableSelection&&!e.isItemDisabled(o),f=o=>!e.isItemDisabled(o)&&e.isItemExpandable(o);Z(e,{updateFirstCharMap:c,handleItemKeyDown:(o,x)=>{if(o.defaultMuiPrevented||o.altKey||o.currentTarget!==o.target)return;const j=o.ctrlKey||o.metaKey,g=o.key;switch(!0){case(g===" "&&u(x)):{o.preventDefault(),s.multiSelect&&o.shiftKey?e.selectRange(o,{end:x}):s.multiSelect?e.selectItem(o,x,!0):e.selectItem(o,x);break}case g==="Enter":{f(x)?(e.toggleItemExpansion(o,x),o.preventDefault()):u(x)&&(s.multiSelect?(o.preventDefault(),e.selectItem(o,x,!0)):e.isItemSelected(x)||(e.selectItem(o,x),o.preventDefault()));break}case g==="ArrowDown":{const m=ct(e,x);m&&(o.preventDefault(),e.focusItem(o,m),s.multiSelect&&o.shiftKey&&u(m)&&e.selectRange(o,{end:m,current:x},!0));break}case g==="ArrowUp":{const m=Yn(e,x);m&&(o.preventDefault(),e.focusItem(o,m),s.multiSelect&&o.shiftKey&&u(m)&&e.selectRange(o,{end:m,current:x},!0));break}case(g==="ArrowRight"&&!i||g==="ArrowLeft"&&i):{if(e.isItemExpanded(x)){const m=ct(e,x);m&&(e.focusItem(o,m),o.preventDefault())}else f(x)&&(e.toggleItemExpansion(o,x),o.preventDefault());break}case(g==="ArrowLeft"&&!i||g==="ArrowRight"&&i):{if(f(x)&&e.isItemExpanded(x))e.toggleItemExpansion(o,x),o.preventDefault();else{const m=e.getNode(x).parentId;m&&(e.focusItem(o,m),o.preventDefault())}break}case g==="Home":{e.focusItem(o,ut(e)),u(x)&&s.multiSelect&&j&&o.shiftKey&&e.rangeSelectToFirst(o,x),o.preventDefault();break}case g==="End":{e.focusItem(o,dt(e)),u(x)&&s.multiSelect&&j&&o.shiftKey&&e.rangeSelectToLast(o,x),o.preventDefault();break}case g==="*":{e.expandAllSiblings(o,x),o.preventDefault();break}case(g==="a"&&j&&s.multiSelect&&!s.disableSelection):{e.selectRange(o,{start:ut(e),end:dt(e)}),o.preventDefault();break}case(!j&&!o.shiftKey&&hr(g)):{const m=l(x,g);m!=null&&(e.focusItem(o,m),o.preventDefault());break}}}})};es.params={};const ts=({slots:e,slotProps:s})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:s.collapseIcon,expandIcon:s.expandIcon,endIcon:s.endIcon}}}});ts.params={};const br=[Jt,Xe,qe,Je,xt,es,ts],Ye=()=>{const e=p.useContext(Ht);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},Qe=({instance:e,setState:s})=>{e.preventItemUpdates();const r=J(a=>{s(c=>{if(c.items.nodeMap[a.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Tow items were provided with the same id in the \`items\` prop: "${a.id}"`].join(`
`));return R({},c,{items:R({},c.items,{nodeMap:R({},c.items.nodeMap,{[a.id]:a}),itemMap:R({},c.items.itemMap,{[a.id]:{id:a.id,label:a.label}})})})})}),n=J(a=>{s(c=>{const l=R({},c.items.nodeMap),u=R({},c.items.itemMap);return delete l[a],delete u[a],R({},c,{items:R({},c.items,{nodeMap:l,itemMap:u})})}),Yt(e,"removeItem",{id:a})}),i=J((a,c)=>(e.updateFirstCharMap(l=>(l[a]=c,l)),()=>{e.updateFirstCharMap(l=>{const u=R({},l);return delete u[a],u})}));Z(e,{insertJSXItem:r,removeJSXItem:n,mapFirstCharFromJSX:i})},jr=({props:e,rootRef:s,contentRef:r})=>{const{children:n,disabled:i=!1,label:a,itemId:c,id:l}=e,{instance:u}=Ye(),f=v=>Array.isArray(v)?v.length>0&&v.some(f):!!v,d=f(n),[o,x]=p.useState(null),j=p.useRef(null),g=Pe(x,s),m=Pe(j,r),h=p.useMemo(()=>({element:o,id:c}),[c,o]),{index:T,parentId:E}=or(h);return p.useEffect(()=>{if(T!==-1)return u.insertJSXItem({id:c,idAttribute:l,index:T,parentId:E,expandable:d,disabled:i}),()=>u.removeJSXItem(c)},[u,E,T,c,d,i,l]),p.useEffect(()=>{var v;if(a)return u.mapFirstCharFromJSX(c,(((v=j.current)==null?void 0:v.textContent)??"").substring(0,1).toLowerCase())},[u,c,a]),{contentRef:m,rootRef:g}};Qe.itemPlugin=jr;Qe.wrapItem=({children:e,itemId:s})=>t.jsx(qt,{id:s,children:e});Qe.params={};const Ir=[...br,Qe],yr=(e,s="warning")=>{let r=!1;const n=Array.isArray(e)?e.join(`
`):e;return()=>{r||(r=!0,s==="error"?console.error(n):console.warn(n))}},Tr=["slots","slotProps","apiRef"],Cr=e=>{let{props:{slots:s,slotProps:r,apiRef:n},plugins:i,rootRef:a}=e,c=ne(e.props,Tr);const l={};i.forEach(d=>{Object.assign(l,d.params)});const u={plugins:i,rootRef:a,slots:s??{},slotProps:r??{},apiRef:n},f={};return Object.keys(c).forEach(d=>{const o=c[d];l[d]?u[d]=o:f[d]=o}),{pluginParams:u,slots:s,slotProps:r,otherProps:f}},Sr=e=>{const{classes:s}=e;return Nt({root:["root"]},Xn,s)},vr=He("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(e,s)=>s.root})({padding:0,margin:0,listStyle:"none",outline:0}),Er=[];yr(["MUI X: The `SimpleTreeView` component does not support the `items` prop.","If you want to add items, you need to pass them as JSX children.","Check the documentation for more details: https://mui.com/x/react-tree-view/simple-tree-view/items/"]);const Le=p.forwardRef(function(s,r){const n=Ft({props:s,name:"MuiSimpleTreeView"}),i=n,{pluginParams:a,slots:c,slotProps:l,otherProps:u}=Cr({props:R({},n,{items:Er}),plugins:Ir,rootRef:r}),{getRootProps:f,contextValue:d}=tr(a),o=Sr(n),x=(c==null?void 0:c.root)??vr,j=ve({elementType:x,externalSlotProps:l==null?void 0:l.root,externalForwardedProps:u,className:o.root,getSlotProps:f,ownerState:i});return t.jsx(ar,{value:d,children:t.jsx(x,R({},j))})});function wr(e){const{instance:s,selection:{multiSelect:r}}=Ye(),n=s.isItemExpandable(e),i=s.isItemExpanded(e),a=s.isItemFocused(e),c=s.isItemSelected(e),l=s.isItemDisabled(e);return{disabled:l,expanded:i,selected:c,focused:a,handleExpansion:o=>{if(!l){a||s.focusItem(o,e);const x=r&&(o.shiftKey||o.ctrlKey||o.metaKey);n&&!(x&&s.isItemExpanded(e))&&s.toggleItemExpansion(o,e)}},handleSelection:o=>{l||(a||s.focusItem(o,e),r&&(o.shiftKey||o.ctrlKey||o.metaKey)?o.shiftKey?s.selectRange(o,{end:e}):s.selectItem(o,e,!0):s.selectItem(o,e))},preventSelection:o=>{(o.shiftKey||o.ctrlKey||o.metaKey||l)&&o.preventDefault()}}}const Rr=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],ss=p.forwardRef(function(s,r){const{classes:n,className:i,displayIcon:a,expansionIcon:c,icon:l,label:u,itemId:f,onClick:d,onMouseDown:o}=s,x=ne(s,Rr),{disabled:j,expanded:g,selected:m,focused:h,handleExpansion:T,handleSelection:E,preventSelection:v}=wr(f),y=l||c||a,S=O=>{v(O),o&&o(O)},M=O=>{T(O),E(O),d&&d(O)};return t.jsxs("div",R({},x,{className:Vt(i,n.root,g&&n.expanded,m&&n.selected,h&&n.focused,j&&n.disabled),onClick:M,onMouseDown:S,ref:r,children:[t.jsx("div",{className:n.iconContainer,children:y}),t.jsx("div",{className:n.label,children:u})]}))});function Pr(e){return Dt("MuiTreeItem",e)}const Q=Ot("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label"]),_r=Gt(t.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Mr=Gt(t.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function ns(e){const{children:s,itemId:r}=e,{wrapItem:n}=Ye();return n({children:s,itemId:r})}ns.propTypes={children:It.node,itemId:It.string.isRequired};const kr=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],Lr=["ownerState"],Ar=["ownerState"],Dr=["ownerState"],Or=e=>{const{classes:s}=e;return Nt({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],groupTransition:["groupTransition"]},Pr,s)},Fr=He("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,s)=>s.root})({listStyle:"none",margin:0,padding:0,outline:0}),Nr=He(ss,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,s)=>[s.content,s.iconContainer&&{[`& .${Q.iconContainer}`]:s.iconContainer},s.label&&{[`& .${Q.label}`]:s.label}]})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${Q.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Q.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ne(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ne(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ne(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Q.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ne(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${Q.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${Q.label}`]:R({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1)})),Vr=He(kn,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,s)=>s.groupTransition})({margin:0,padding:0,paddingLeft:12}),W=p.forwardRef(function(s,r){const{icons:n,runItemPlugins:i,selection:{multiSelect:a},disabledItemsFocusable:c,instance:l}=Ye(),u=Ft({props:s,name:"MuiTreeItem"}),{children:f,className:d,slots:o,slotProps:x,ContentComponent:j=ss,ContentProps:g,itemId:m,id:h,label:T,onClick:E,onMouseDown:v,onBlur:y,onKeyDown:S}=u,M=ne(u,kr),{contentRef:O,rootRef:te}=i(u),ie=Pe(r,te),G=Pe(g==null?void 0:g.ref,O),I={expandIcon:(o==null?void 0:o.expandIcon)??n.slots.expandIcon??_r,collapseIcon:(o==null?void 0:o.collapseIcon)??n.slots.collapseIcon??Mr,endIcon:(o==null?void 0:o.endIcon)??n.slots.endIcon,icon:o==null?void 0:o.icon,groupTransition:o==null?void 0:o.groupTransition},se=D=>Array.isArray(D)?D.length>0&&D.some(se):!!D,k=se(f),L=l.isItemExpanded(m),A=l.isItemFocused(m),le=l.isItemSelected(m),V=l.isItemDisabled(m),ce=R({},u,{expanded:L,focused:A,selected:le,disabled:V}),q=Or(ce),ft=I.groupTransition??void 0,as=ve({elementType:ft,ownerState:{},externalSlotProps:x==null?void 0:x.groupTransition,additionalProps:{unmountOnExit:!0,in:L,component:"ul",role:"group"},className:q.groupTransition}),Ze=L?I.collapseIcon:I.expandIcon,is=ve({elementType:Ze,ownerState:{},externalSlotProps:D=>L?R({},de(n.slotProps.collapseIcon,D),de(x==null?void 0:x.collapseIcon,D)):R({},de(n.slotProps.expandIcon,D),de(x==null?void 0:x.expandIcon,D))}),ls=ne(is,Lr),cs=k&&Ze?t.jsx(Ze,R({},ls)):null,et=k?void 0:I.endIcon,ds=ve({elementType:et,ownerState:{},externalSlotProps:D=>k?{}:R({},de(n.slotProps.endIcon,D),de(x==null?void 0:x.endIcon,D))}),us=ne(ds,Ar),ps=et?t.jsx(et,R({},us)):null,tt=I.icon,gs=ve({elementType:tt,ownerState:{},externalSlotProps:x==null?void 0:x.icon}),ms=ne(gs,Dr),xs=tt?t.jsx(tt,R({},ms)):null;let st;a?st=le:le&&(st=!0);function fs(D){!A&&(!V||c)&&D.currentTarget===D.target&&l.focusItem(D,m)}function hs(D){y==null||y(D),l.removeFocusedItem()}const bs=D=>{S==null||S(D),l.handleItemKeyDown(D,m)},js=l.getTreeItemId(m,h),Is=l.canItemBeTabbed(m)?0:-1;return t.jsx(ns,{itemId:m,children:t.jsxs(Fr,R({className:Vt(q.root,d),role:"treeitem","aria-expanded":k?L:void 0,"aria-selected":st,"aria-disabled":V||void 0,id:js,tabIndex:Is},M,{ownerState:ce,onFocus:fs,onBlur:hs,onKeyDown:bs,ref:ie,children:[t.jsx(Nr,R({as:j,classes:{root:q.content,expanded:q.expanded,selected:q.selected,focused:q.focused,disabled:q.disabled,iconContainer:q.iconContainer,label:q.label},label:T,itemId:m,onClick:E,onMouseDown:v,icon:xs,expansionIcon:cs,displayIcon:ps,ownerState:ce},g,{ref:G})),f&&t.jsx(Vr,R({as:ft},as,{children:f}))]}))})}),ee=()=>t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[t.jsx(fn,{sx:{width:"1em !important",height:"1em !important"}}),t.jsx(xe,{children:"Loading..."})]}),Te={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTablePaperProps:{sx:{boxShadow:"none",marginRight:"30px",marginBottom:"40px"}}},Ce=({msg:e})=>t.jsx(C,{sx:{padding:"1rem 0",marginBottom:"20px"},children:t.jsx(xe,{children:e})}),zr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Br=({dbs:e,tbl:s})=>{b.debug(e,s);const r=F(),n=P(d=>ys(d,e,s));b.debug(n);const i=P(d=>Ts(d,e,s));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{sn(e,s,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r(Cs({dbs:e,tbl:s,cls:o}))},d=>{b.error("error",d),c(d??_.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),f=Ie({...Te,columns:u,data:i,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx(zr,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Table has no columns"}):(b.debug(i),t.jsx(ye,{table:f})):t.jsx(ee,{})},Kr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Gr=({dbs:e,tbl:s})=>{b.debug(e,s);const r=F(),n=P(d=>Ss(d,e,s));b.debug(n);const i=P(d=>vs(d,e,s));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{nn(e,s,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r(Es({dbs:e,tbl:s,idx:o}))},d=>{b.error("error",d),c(d??_.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),f=Ie({...Te,columns:u,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx(Kr,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Table has no indexes"}):t.jsx(ye,{table:f}):t.jsx(ee,{})},$r=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Ur=({dbs:e,tbl:s})=>{b.debug(e,s);const r=F(),n=P(d=>ws(d,e,s));b.debug(n);const i=P(d=>Rs(d,e,s));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{rn(e,s,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r(Ps({dbs:e,tbl:s,trg:o}))},d=>{b.error("error",d),c(d??_.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:d})=>t.jsx("pre",{style:{padding:0,margin:0},children:d.getValue()})}],[]),f=Ie({...Te,columns:u,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx($r,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Table has no triggers"}):t.jsx(ye,{table:f}):t.jsx(ee,{})},Wr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Hr=({dbs:e,tbl:s})=>{b.debug(e,s);const r=F(),n=P(d=>_s(d,e,s));b.debug(n);const i=P(d=>Ms(d,e,s));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{on(e,s,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r(ks({dbs:e,tbl:s,frk:o}))},d=>{b.error("error",d),c(d)})},u=p.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),f=Ie({...Te,columns:u,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx(Wr,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Table contains no foreign keys"}):t.jsx(ye,{table:f}):t.jsx(ee,{})};var H=(e=>(e[e.TABLE=0]="TABLE",e[e.VIEW=1]="VIEW",e))(H||{});const rs=p.memo(({dbs:e,tbl:s,typ:r})=>(b.debug(e,s,r),t.jsxs(Le,{"aria-label":"Columns and indexes",slots:{expandIcon:X,collapseIcon:ke},sx:{display:"grid",gap:"0"},children:[t.jsx(W,{itemId:"columns",label:t.jsxs(C,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[t.jsx(hn,{}),t.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:t.jsx(Br,{dbs:e,tbl:s})}),r===H.TABLE&&t.jsxs(t.Fragment,{children:[t.jsx(W,{itemId:"indexes",label:t.jsxs(C,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[t.jsx(bn,{}),t.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:t.jsx(Gr,{dbs:e,tbl:s})}),t.jsx(W,{itemId:"foreignkeys",label:t.jsxs(C,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[t.jsx(_n,{}),t.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:t.jsx(Hr,{dbs:e,tbl:s})}),t.jsx(W,{itemId:"triggers",label:t.jsxs(C,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[t.jsx(zt,{}),t.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:t.jsx(Ur,{dbs:e,tbl:s})})]})]})));var oe=(e=>(e[e.MANAGE=0]="MANAGE",e[e.EXPLORE=1]="EXPLORE",e))(oe||{});const os=p.memo(({dbs:e,tbl:s,typ:r})=>{var a,c;b.debug(e,s,r);const n=F(),i=jn("(max-width:900px)");return t.jsxs(C,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px","&:hover":{".pp-row-actions":{visibility:i?"hidden":"visible"}}},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px",overflow:"hidden"},children:[r===H.VIEW?t.jsx(Bt,{}):t.jsx(Kt,{}),t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[t.jsx(C,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:s}),t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(re,{title:"Manage Table",children:t.jsx(ue,{underline:"none",onClick:l=>{n(Ae({dbs:e,tbl:s,typ:r,explorerAction:oe.MANAGE})),l.preventDefault(),l.stopPropagation()},children:"Manage"})}),t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(re,{title:"Explore Table",children:t.jsx(ue,{underline:"none",onClick:l=>{n(Ae({dbs:e,tbl:s,typ:r,explorerAction:oe.EXPLORE})),l.preventDefault(),l.stopPropagation()},children:"Explore"})})]})]})]}),t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center",paddingRight:"16px"},children:[t.jsx(re,{title:"Manage Table",children:t.jsx(ge,{sx:{color:(a=$e)==null?void 0:a.palette.primary.main},onClick:l=>{n(Ae({dbs:e,tbl:s,typ:r,explorerAction:oe.MANAGE})),l.preventDefault(),l.stopPropagation()},children:t.jsx(In,{})})}),t.jsx(re,{title:"Explore Table",children:t.jsx(ge,{sx:{color:(c=$e)==null?void 0:c.palette.primary.main},onClick:l=>{n(Ae({dbs:e,tbl:s,typ:r,explorerAction:oe.EXPLORE})),l.preventDefault(),l.stopPropagation()},children:t.jsx(yn,{})})})]})]})}),Xr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),qr=p.memo(({dbs:e,search:s})=>{const r=F();b.debug(e,s);const n=P(l=>Ls(l,e));b.debug(n);const i=P(l=>As(l,e));b.debug(i);const[a,c]=p.useState("");return p.useEffect(()=>{n||an(e,function(l){const u=l==null?void 0:l.data;b.debug("response data",u),r(Ds({dbs:e,tbl:u}))},l=>{b.error("error",l),c(l??_.contactSupport)})},[n]),a!==""?t.jsx(p.Suspense,{children:t.jsx(Xr,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(C,{sx:{padding:"1rem"},children:t.jsx(xe,{children:"Database contains no tables"})}):t.jsxs(Le,{"aria-label":"Tables",slots:{expandIcon:X,collapseIcon:ke},sx:{display:"grid",gap:"0"},children:[...i.map(l=>{const u=s!==""&&!l.toLowerCase().includes(s.toLowerCase());return t.jsx(W,{itemId:l,label:t.jsx(os,{dbs:e,tbl:l,typ:H.TABLE}),sx:{visibility:u?"hidden":"inherit",position:u?"fixed !important":"inherit"},children:t.jsx(rs,{dbs:e,tbl:l,typ:H.TABLE})})})]}):t.jsx(ee,{})}),Jr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Yr=({dbs:e,search:s})=>{const r=F();b.debug(e,s);const n=P(u=>Os(u,e));b.debug(n);const[i,a]=p.useState("");p.useEffect(()=>{n||l()},[n]);const c=P(u=>Fs(u,e));b.debug(c);const l=()=>{ln(e,u=>{const f=u==null?void 0:u.data;b.debug("response data",f),r(Ns({dbs:e,vws:f}))},u=>{b.error("error",u),a(u??_.contactSupport)})};return i!==""?t.jsx(p.Suspense,{children:t.jsx(Jr,{severity:"error",message:i,close:!1})}):n?n&&c.length===0?t.jsx(C,{sx:{padding:"1rem"},children:t.jsx(xe,{children:"Database contains no views"})}):t.jsxs(Le,{"aria-label":"Views",slots:{expandIcon:X,collapseIcon:ke},sx:{display:"grid",gap:"0"},children:[...c.map(u=>{const f=s!==""&&!u.toLowerCase().includes(s.toLowerCase());return t.jsx(W,{itemId:u,label:t.jsx(os,{dbs:e,tbl:u,typ:H.TABLE}),sx:{visibility:f?"hidden":"unset",position:f?"fixed !important":"inherit"},children:t.jsx(rs,{dbs:e,tbl:u,typ:H.TABLE})})})]}):t.jsx(ee,{})},Qr=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),Zr=({dbs:e,search:s})=>{b.debug(e,s);const r=F(),n=P(d=>Vs(d,e));b.debug(n);const i=P(d=>zs(d,e));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{cn(e,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r(Bs({dbs:e,prc:o}))},d=>{b.error("error",d),c(d??_.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:d})=>t.jsx("pre",{style:{padding:0,margin:0},children:d.getValue()})}],[]),f=Ie({...Te,columns:u,data:i.filter(d=>s===""||d.routine_name.toLowerCase().includes(s.toLowerCase())),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx(Qr,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Database contains no stored procedures"}):t.jsx(ye,{table:f}):t.jsx(ee,{})},eo=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),to=({dbs:e,search:s})=>{b.debug(e,s);const r=F(),n=P(d=>Ks(d,e));b.debug(n);const i=P(d=>Gs(d,e));b.debug(i);const[a,c]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{dn(e,d=>{const o=d==null?void 0:d.data;b.debug("response data",o),r($s({dbs:e,fnc:o}))},d=>{b.error("error",d),c(d??_.contactSupport)})},u=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:d})=>t.jsx("pre",{style:{padding:0,margin:0},children:d.getValue()})}],[]),f=Ie({...Te,columns:u,data:i.filter(d=>s===""||d.routine_name.toLowerCase().includes(s.toLowerCase())),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return b.debug(f),a!==""?t.jsx(p.Suspense,{children:t.jsx(eo,{severity:"error",message:a,close:!1})}):n?n&&i.length===0?t.jsx(Ce,{msg:"Database contains no functions"}):t.jsx(ye,{table:f}):t.jsx(ee,{})};var N=(e=>(e.WP="wp",e.LOCAL="local",e.REMOTE="remote",e.SYSTEM="system",e))(N||{});const so=({setShowFilter:e})=>{const s=F(),r=P(a=>Rt(a));b.debug(r);const n=P(a=>pt(a));b.debug(n);const i=()=>{localStorage.setItem("ppDbsTypes",JSON.stringify(r))};return t.jsxs(ot,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[t.jsx(zn,{title:"Database filter",sx:{textAlign:"center"}}),t.jsx(at,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:t.jsxs(C,{sx:{display:"inline-grid",textAlign:"left"},children:[t.jsx($,{children:t.jsxs(U,{children:[t.jsx(Ve,{checked:r.includes(N.WP),onChange:(a,c)=>{s(c?De({dbsType:N.WP}):Oe({dbsType:N.WP}))}}),"WordPress database"]})}),t.jsx($,{children:t.jsxs(U,{children:[t.jsx(Ve,{checked:r.includes(N.LOCAL),onChange:(a,c)=>{s(c?De({dbsType:N.LOCAL}):Oe({dbsType:N.LOCAL}))}}),"Local databases"]})}),t.jsx($,{children:t.jsxs(U,{children:[t.jsx(Ve,{checked:r.includes(N.REMOTE),onChange:(a,c)=>{s(c?De({dbsType:N.REMOTE}):Oe({dbsType:N.REMOTE}))}}),"Remote databases"]})}),t.jsx($,{children:t.jsxs(U,{children:[t.jsx(Ve,{checked:r.includes(N.SYSTEM),onChange:(a,c)=>{s(c?De({dbsType:N.SYSTEM}):Oe({dbsType:N.SYSTEM}))}}),"System databases"]})})]})}),t.jsxs(Kn,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[t.jsx(z,{variant:"contained",onClick:()=>i(),children:"Remember"}),t.jsx(z,{variant:"contained",onClick:()=>e(!1),children:"OK"})]})]})},Ee=({search:e,setSearch:s,addFilter:r})=>{b.debug(e,r);const[n,i]=p.useState(!1);return t.jsxs(C,{sx:{position:"relative",marginRight:r?0:"20px"},children:[t.jsx(ae,{value:e,type:"search",onChange:a=>{s(a.target.value)},onClick:a=>{a.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:t.jsx(Tt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:t.jsx(Tn,{})}),endAdornment:t.jsx(t.Fragment,{children:r&&t.jsx(Tt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:t.jsx(ge,{onClick:()=>{i(!n)},children:t.jsx(Cn,{})})})})}}),n&&t.jsx(so,{setShowFilter:i})]})},no=p.memo(({dbs:e})=>{b.debug(e);const s=F(),[r,n]=p.useState(!1),[i,a]=p.useState("");b.debug(r,i);const[c,l]=p.useState(!1),[u,f]=p.useState("");b.debug(c,u);const[d,o]=p.useState(!1),[x,j]=p.useState("");b.debug(d,x);const[g,m]=p.useState(!1),[h,T]=p.useState("");b.debug(g,h);const[E,v]=p.useState("");return b.debug(E),t.jsxs(Le,{className:"pp-data-exporer-table-tree","aria-label":"Databases",slots:{expandIcon:X,collapseIcon:ke},sx:{display:"grid",gap:"0"},children:[t.jsx(W,{itemId:"tables",className:"pp-data-exporer-table-tree-item "+E,onClickCapture:y=>{var S;!(y.target instanceof HTMLInputElement)&&!(y.target instanceof HTMLAnchorElement)&&((S=y.target.closest("li"))!=null&&S.classList.contains("pp-data-exporer-table-tree-item"))&&(v(E===""?"hide-details":""),r?y.stopPropagation():(n(!0),v("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Kt,{}),"Tables"]}),t.jsxs(C,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(ue,{underline:"none",onClick:y=>{s(Be({dbs:e})),y.preventDefault(),y.stopPropagation()},children:"Refresh"})]})]}),t.jsx(C,{children:r&&E===""&&t.jsx(Ee,{search:i,setSearch:a})})]}),children:t.jsx(qr,{dbs:e,search:i})}),t.jsx(W,{itemId:"view",onClick:()=>{l(!c)},label:t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Bt,{}),"Views"]}),t.jsxs(C,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(ue,{underline:"none",onClick:y=>{s(Pt({dbs:e})),y.preventDefault(),y.stopPropagation()},children:"Refresh"})]})]}),t.jsx(C,{children:c&&t.jsx(Ee,{search:u,setSearch:f})})]}),sx:{padding:0,minWidth:0},children:t.jsx(Yr,{dbs:e,search:u})}),t.jsx(W,{itemId:"procedures",onClick:()=>{o(!d)},label:t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(zt,{}),"Stored Procedures"]}),t.jsxs(C,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(ue,{underline:"none",onClick:y=>{s(Us({dbs:e})),y.preventDefault(),y.stopPropagation()},children:"Refresh"})]})]}),t.jsx(C,{children:d&&t.jsx(Ee,{search:x,setSearch:j})})]}),sx:{padding:0,minWidth:0},children:t.jsx(Zr,{dbs:e,search:x})}),t.jsx(W,{itemId:"functions",onClick:()=>{m(!g)},label:t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Mn,{}),"Functions"]}),t.jsxs(C,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[t.jsx(C,{sx:{borderLeft:"1px solid black",height:"100%"}}),t.jsx(ue,{underline:"none",onClick:y=>{s(Ws({dbs:e})),y.preventDefault(),y.stopPropagation()},children:"Refresh"})]})]}),t.jsx(C,{children:g&&t.jsx(Ee,{search:h,setSearch:T})})]}),sx:{padding:0,minWidth:0},children:t.jsx(to,{dbs:e,search:h})})]})});const wt=p.lazy(()=>Y(()=>import("./Alert-1.0.4-09b90733.js"),["./Alert-1.0.4-09b90733.js","./main-1.0.4.js","./index.esm-1.0.4-53f8e071.js","./iconBase-1.0.4-684ba590.js","./AdminTheme-1.0.4-e85d4fc0.js","./AlertTitle-1.0.4-103cc369.js","./Close-1.0.4-ca2bff70.js","./useSlot-1.0.4-77de692c.js"],import.meta.url)),ro=()=>{var x,j;const e=F(),[s,r]=p.useState(""),n=P(g=>_t(g));b.debug(n);const i=P(g=>Hs(g));b.debug(i);const a=P(g=>gt(g));b.debug(a);const c=P(g=>Rt(g));b.debug(c);const[l,u]=p.useState("");p.useEffect(()=>{f()},[]);const f=()=>{let g=[];const m=localStorage.getItem("ppDbsTypes");m!=null&&m!==""?g=JSON.parse(m):g=[N.WP,N.LOCAL,N.REMOTE],un(h=>{const T=h==null?void 0:h.data;b.debug("response data",T);const E=[],v={};T.map(S=>{E.push(S.dbs),v[S.dbs]=!1}),o(v),E.sort((S,M)=>S.localeCompare(M,void 0,{sensitivity:"base"})),e(Xs({dbs:E,dbsTypes:g}));const y={};T.map(S=>{y[S.dbs]=S.dbs_type}),e(qs({dbs:y}))},h=>{b.error("error",h),u(h??_.contactSupport)})},[d,o]=p.useState({});return l!==""?t.jsx(p.Suspense,{children:t.jsx(wt,{severity:"error",message:l,close:!1})}):t.jsxs(C,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[t.jsx(kt,{position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(Lt,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[t.jsx(C,{sx:{textAlign:((x=me.appOrig)==null?void 0:x.appTarget)==="backend"?"right":"left"},children:((j=me.appOrig)==null?void 0:j.appTarget)==="backend"?"Search & Filter":"Data Explorer"}),t.jsx(C,{children:t.jsx(Ee,{search:s,setSearch:r,addFilter:!0})})]})}),n==null?t.jsx(C,{sx:{padding:"30px"},children:t.jsx(mt,{title:"Loading..."})}):t.jsxs(t.Fragment,{children:[i!==""&&t.jsx(C,{sx:{marginBottom:"30px"},children:t.jsx(p.Suspense,{children:t.jsx(wt,{severity:"error",message:i,close:!0,setClose:()=>{e(Mt({error:""}))}})})}),t.jsx(Le,{className:"pp-data-exporer-database-tree","aria-label":"Data Explorer",slots:{expandIcon:X,collapseIcon:ke},sx:{display:"grid",gridGap:"0",borderBottom:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px","& li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(n).map(g=>{if(c.includes(a[g])===!1||s!==""&&!g.toLowerCase().includes(s.toLowerCase()))return null;const m=a[g].toLocaleLowerCase()==="wp"?g+" (WordPress database)":g;return t.jsx(W,{itemId:g,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:h=>{var T,E,v,y;if((T=h.target.closest("li"))!=null&&T.classList.contains("pp-data-exporer-database-tree-item"))if((E=h.target.closest("li"))!=null&&E.classList.contains("hide-details")?(v=h.target.closest("li"))==null||v.classList.remove("hide-details"):(y=h.target.closest("li"))==null||y.classList.add("hide-details"),d[g])h.stopPropagation();else{const S=d;S[g]=!0,o(S)}},sx:{padding:"0","&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[t.jsx(Pn,{}),m]}),children:t.jsx(no,{dbs:g})},g)})})]})]})},oo=()=>{const e=P(s=>pt(s));return b.debug(e),t.jsx(t.Fragment,{children:e!==void 0&&e.action===oe.EXPLORE&&t.jsx(Gn,{appId:Sn(),dbs:e.dbs,tbl:e.tbl,exploring:!0})})},ao=({dbs:e,tbl:s})=>{b.debug(e,s);const[r,n]=p.useState(!1),[i,a]=p.useState(void 0),c=()=>{switch(i){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return t.jsxs(t.Fragment,{children:[t.jsxs(he,{disableGutters:!0,children:[t.jsx(be,{expandIcon:t.jsx(X,{}),children:"Reset"}),t.jsx(je,{children:t.jsxs($,{sx:{display:"grid",gridGap:"20px"},children:[t.jsx(z,{variant:"contained",color:"primary",onClick:()=>{a(nt.TABLE),n(!0)},children:"Reset Table Builder"}),t.jsx(z,{variant:"contained",color:"primary",onClick:()=>{a(nt.FORM),n(!0)},children:"Reset Form Builder"}),t.jsx(z,{variant:"contained",color:"primary",onClick:()=>{a(nt.THEME),n(!0)},children:"Reset Theme"}),t.jsxs(fe,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},children:[t.jsx(At,{}),"A reset cannot be undone!"]})]})})]}),t.jsx(Re,{title:c(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{i!==void 0&&Ln($n.GLOBAL,i,e,s,null,null,l=>{if(l!=null&&l.code&&(l==null?void 0:l.message)!==void 0)switch(l.code){case"ok":w(l.message,{variant:"success"});break;case"info":w(l.message,{variant:"info"});break;default:w(l.message??_.contactSupport,{variant:"error"})}else b.error(l),w(_.contactSupport,{variant:"error"})},l=>{b.error("error",l),w(l??_.contactSupport,{variant:"error"})})}})]})},io=({dbs:e,tbl:s,setIsUpdated:r})=>{b.debug(e,s);const n=F(),i=P(c=>pe(c));b.debug(i);const a=c=>{const l={...i,table_settings:{...i.table_settings,hyperlink_definition:c}};n(Ke({settings:l})),r(!0)};return t.jsxs(he,{disableGutters:!0,children:[t.jsx(be,{expandIcon:t.jsx(X,{}),children:"Table Settings"}),t.jsx(je,{children:t.jsxs($,{children:[t.jsx(U,{children:"Process hyperlink columns as"}),t.jsxs($t,{sx:{marginTop:"10px",marginBottom:"10px"},children:[t.jsxs(U,{className:"align-label-radio",children:[t.jsx(Ue,{checked:i.table_settings.hyperlink_definition==="json",onChange:c=>{a("json"),c.stopPropagation()}}),"Preformatted JSON"]}),t.jsxs(U,{children:[t.jsx(Ue,{checked:i.table_settings.hyperlink_definition==="text",onChange:c=>{a("text"),c.stopPropagation()}}),"Plain text"]})]}),t.jsx(fe,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},lo=({dbs:e,tbl:s,setIsUpdated:r})=>{var o;b.debug(e,s);const n=F(),i=P(x=>Js(x));b.debug(i);const a=P(x=>pe(x));b.debug(a);const[c,l]=p.useState(""),u=(x,j)=>{const g={...a,list_labels:{...a.list_labels,[x]:j}};n(Ke({settings:g})),r(!0)},f=(x,j)=>{const g={...a,form_labels:{...a.form_labels,[x]:j}};n(Ke({settings:g})),r(!0)},d=(x,j)=>{const g={...a,column_media:{...a.column_media,[x]:j}};n(Ke({settings:g})),r(!0)};return t.jsxs(he,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[t.jsx(be,{expandIcon:t.jsx(X,{}),children:"Column Settings"}),t.jsx(je,{children:t.jsxs($,{fullWidth:!0,children:[t.jsx(C,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:t.jsxs(C,{children:[...(o=i==null?void 0:i.columns)==null?void 0:o.map((x,j)=>{const g=x.column_name;return t.jsxs(he,{expanded:c===g,onChange:()=>{l(c===g?"":g)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[t.jsx(be,{expandIcon:t.jsx(X,{}),children:x.column_name}),t.jsxs(je,{sx:{display:"grid",gridGap:"10px"},children:[t.jsx(ae,{label:"Table label",value:a.list_labels[g],variant:"outlined",onChange:m=>{u(g,m.target.value)}}),t.jsx(ae,{label:"Form label",value:a.form_labels[g],variant:"outlined",onChange:m=>{f(g,m.target.value)}}),t.jsxs($,{children:[t.jsx(it,{id:"media_type_label"+j,variant:"outlined",children:"Media type"}),t.jsxs(lt,{labelId:"media_type_label"+j,id:"media_type"+j,label:"Media type",value:a.column_media[g]??"",variant:"outlined",onChange:m=>{d(g,m.target.value),m.stopPropagation()},children:[t.jsx(K,{value:"",children:""},""),t.jsx(K,{value:"Attachment",children:"Attachment"},"Attachment"),t.jsx(K,{value:"Audio",children:"Audio"},"Audio"),t.jsx(K,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),t.jsx(K,{value:"Image",children:"Image"},"Image"),t.jsx(K,{value:"ImageURL",children:"ImageURL"},"ImageURL"),t.jsx(K,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),t.jsx(fe,{children:"Default column labels and column media types"})]})})]})};var B=(e=>(e.SELECT="select",e.INSERT="insert",e.UPDATE="update",e.DELETE="delete",e))(B||{}),we=(e=>(e.GET="GET",e.POST="POST",e))(we||{});const ze=({restApi:e,action:s,roles:r,users:n,setRestApi:i,expanded:a,setExpanded:c})=>{b.debug(e,s,r,n,a);const l=(j,g)=>{const m=Un(e);if(g)m.methods.push(j);else{const h=m.methods.indexOf(j);h>-1&&m.methods.splice(h,1)}b.debug(j,g,m),i(m)},u=j=>{b.debug(j),i({...e,authorization:j})},f=j=>{b.debug(j),i({...e,authorized_roles:j.map(g=>g.key)})},d=j=>{b.debug(j),i({...e,authorized_users:j.map(g=>g.key)})},o=p.useMemo(()=>r.filter(j=>e.authorized_roles.includes(j.key)),[e.authorized_roles,r]),x=p.useMemo(()=>n.filter(j=>e.authorized_users.includes(j.key)),[e.authorized_users,n]);return t.jsxs(he,{disableGutters:!0,expanded:a===s.toString(),onChange:()=>{a===s.toString()?c(""):c(s)},children:[t.jsx(be,{expandIcon:t.jsx(X,{}),sx:{textTransform:"capitalize"},children:s}),t.jsx(je,{children:t.jsxs(C,{sx:{display:"grid",gridGap:"20px"},children:[t.jsx(U,{children:"Supported HTTP methods"}),t.jsxs(C,{children:[t.jsx(Me,{control:t.jsx(_e,{checked:e.methods.includes(we.GET),onChange:(j,g)=>{l(we.GET,g),j.stopPropagation()}}),label:"GET",labelPlacement:"end"}),t.jsx(Me,{control:t.jsx(_e,{checked:e.methods.includes(we.POST),onChange:(j,g)=>{l(we.POST,g),j.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),t.jsx(U,{children:"Authorization"}),t.jsxs($,{sx:{marginLeft:"-10px"},children:[t.jsxs($t,{children:[t.jsxs(U,{className:"align-label-radio",sx:{cursor:"pointer"},children:[t.jsx(Ue,{checked:e.authorization===Se.AUTHORIZED,onChange:j=>{u(Se.AUTHORIZED),j.stopPropagation()}}),"Authorized access only"]}),t.jsxs(C,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[t.jsx(yt,{multiple:!0,options:r,getOptionLabel:j=>j.value,value:o,onChange:(j,g)=>{f(g)},renderInput:j=>t.jsx(ae,{...j,label:"Roles"})}),t.jsx(yt,{multiple:!0,options:n,getOptionLabel:j=>j.value,value:x,onChange:(j,g)=>{d(g)},renderInput:j=>t.jsx(ae,{...j,label:"Users"})})]}),t.jsxs(U,{className:"align-label-radio",sx:{cursor:"pointer"},children:[t.jsx(Ue,{checked:e.authorization===Se.ANONYMOUS,onChange:j=>{u(Se.ANONYMOUS),j.stopPropagation()}}),"Anonymous access"]})]}),e.authorization===Se.ANONYMOUS&&e.methods.length>0&&t.jsxs(C,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(s===B.INSERT||s===B.UPDATE||s===B.DELETE)&&t.jsx(fe,{children:"This setting allows non-authorized users to modify this table"}),s===B.SELECT&&t.jsx(fe,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},co=({dbs:e,tbl:s,typ:r,metaData:n,setIsUpdated:i})=>{var x,j,g,m;b.debug(e,s,r,n);const a=F(),c=P(h=>pe(h));b.debug(c);const l=P(h=>gt(h));b.debug(l);const[u,f]=p.useState(""),d=[];if(((j=(x=n==null?void 0:n.settings)==null?void 0:x.wp)==null?void 0:j.roles)!==void 0)for(const h in n.settings.wp.roles)d.push({key:h,value:n.settings.wp.roles[h]});b.debug(d);const o=[];if(((m=(g=n==null?void 0:n.settings)==null?void 0:g.wp)==null?void 0:m.users)!==void 0)for(const h in n.settings.wp.users)o.push({key:h,value:n.settings.wp.users[h]});return b.debug(o),t.jsxs(he,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[t.jsx(be,{expandIcon:t.jsx(X,{}),children:"REST API"}),t.jsx(je,{children:t.jsxs(C,{children:[t.jsx(Me,{control:t.jsx(_e,{checked:c.rest_api!==null,onClick:h=>{c.rest_api!==null?a(Ys({})):a(Qs({})),i(!0),h.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),c.rest_api!==null&&t.jsxs(C,{sx:{marginTop:"20px"},children:[t.jsx(ze,{restApi:c.rest_api.select,action:B.SELECT,roles:d,users:o,setRestApi:h=>{const T={...c.rest_api};T[B.SELECT]=h,a(Fe({rest_api:T})),i(!0)},expanded:u,setExpanded:f}),t.jsx(ze,{restApi:c.rest_api.insert,action:B.INSERT,roles:d,users:o,setRestApi:h=>{const T={...c.rest_api};T[B.INSERT]=h,a(Fe({rest_api:T})),i(!0)},expanded:u,setExpanded:f}),t.jsx(ze,{restApi:c.rest_api.update,action:B.UPDATE,roles:d,users:o,setRestApi:h=>{const T={...c.rest_api};T[B.UPDATE]=h,a(Fe({rest_api:T})),i(!0)},expanded:u,setExpanded:f}),t.jsx(ze,{restApi:c.rest_api.delete,action:B.DELETE,roles:d,users:o,setRestApi:h=>{const T={...c.rest_api};T[B.DELETE]=h,a(Fe({rest_api:T})),i(!0)},expanded:u,setExpanded:f})]}),l[e]==="system"||l[e]==="wp"&&n.settings.wp.tables.includes(s)&&t.jsxs(fe,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[t.jsx(At,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},uo=(e,s,r,n,i,a=!1)=>{b.debug(e,s,r),We(me.appUrlActionRename,{dbs:e,from_tbl:s,to_tbl:r},n,i,a)},po=(e,s,r,n,i,a,c,l=!1)=>{b.debug(e,s,r,n,i),We(me.appUrlActionCopy,{from_dbs:e,to_dbs:s,from_tbl:r,to_tbl:n,copy_data:i},a,c,l)},go=(e,s,r,n,i=!1)=>{b.debug(e,s),We(me.appUrlActionTruncate,{dbs:e,tbl:s},r,n,i)},mo=(e,s,r,n,i=!1)=>{b.debug(e,s),We(me.appUrlActionDrop,{dbs:e,tbl:s},r,n,i)},xo=({dbs:e,tbl:s,typ:r,metaData:n})=>{b.debug(e,s,r,n);const i=F(),[a,c]=p.useState("sql"),[l,u]=p.useState(!0),[f,d]=p.useState(""),[o,x]=p.useState(e),[j,g]=p.useState(""),[m,h]=p.useState(!0),[T,E]=p.useState(!1),[v,y]=p.useState(!1),[S,M]=p.useState(!1),[O,te]=p.useState(!1),ie=p.useMemo(()=>{const I=[],se=_t(rt.getState());for(const k in se)I.push(k);return I},[]);b.debug(ie);const G=P(I=>gt(I));return b.debug(G),t.jsxs(t.Fragment,{children:[t.jsxs(C,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[t.jsxs(C,{className:"pp-action",children:[t.jsx(C,{children:t.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[t.jsx("input",{type:"hidden",name:"type",value:"table"}),t.jsx("input",{type:"hidden",name:"wpdaschema_name",value:e}),t.jsx("input",{type:"hidden",name:"table_names",value:s}),t.jsx("input",{type:"hidden",name:"format_type",value:a}),t.jsx("input",{type:"hidden",name:"include_table_settings",value:a==="sql"&&l?"on":"off"}),t.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),t.jsx(z,{variant:"contained",type:"submit",children:"Export"})]})}),t.jsxs(C,{sx:{display:"grid"},children:[t.jsxs($,{children:[t.jsx(it,{variant:"outlined",children:"Export to"}),t.jsxs(lt,{label:"Export to",value:a,onChange:I=>{c(I.target.value)},children:[t.jsx(K,{value:"sql",children:"SQL"},"sql"),t.jsx(K,{value:"csv",children:"CSV"},"csv"),t.jsx(K,{value:"json",children:"JSON"},"json"),t.jsx(K,{value:"excel",children:"Excel"},"excel"),t.jsx(K,{value:"xml",children:"XML"},"xml")]})]}),t.jsx(Me,{sx:{visibility:a==="sql"?"visible":"hidden",height:a==="sql"?"auto":0,marginTop:a==="sql"?"10px":0,marginLeft:0},control:t.jsx(_e,{checked:l,onClick:I=>{u(!l),I.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),G[e]!=="system"&&(G[e]!=="wp"||!n.settings.wp.tables.includes(s))&&t.jsxs(C,{className:"pp-action",children:[t.jsx(C,{children:t.jsx(z,{variant:"contained",onClick:()=>{s!==f&&f.trim()!==""?E(!0):w("Nothing to rename",{variant:"error"})},children:"Rename"})}),t.jsx(C,{children:t.jsx(ae,{label:r===H.TABLE?"New table name":"New view name",value:f,onChange:I=>{d(I.target.value)},fullWidth:!0})})]}),r===H.TABLE&&t.jsxs(C,{className:"pp-action",children:[t.jsxs(C,{children:[t.jsx(z,{variant:"contained",onClick:()=>{j.trim()!==""?(te(!0),po(e,o,s,j,m,I=>{if(b.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":i(Be({dbs:e})),w(I.message,{variant:"success"});break;case"info":w(I.message,{variant:"info"});break;default:b.error(I),w(I.message??_.contactSupport,{variant:"error"})}else b.error(I),w(_.contactSupport,{variant:"error"});te(!1)},I=>{b.error("error",I),w(I??_.contactSupport,{variant:"error"}),te(!1)})):w("Nothing to rename",{variant:"error"})},children:"Copy"}),t.jsx(Me,{control:t.jsx(_e,{checked:m,onClick:I=>{h(!m),I.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),t.jsx(C,{sx:{display:O?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:t.jsx(mt,{title:"Copying..."})})]}),t.jsxs(C,{sx:{display:"grid",gridGap:"10px"},children:[t.jsxs($,{fullWidth:!0,children:[t.jsx(it,{variant:"outlined",children:"To database"}),t.jsxs(lt,{label:"To database",value:o,onChange:I=>{x(I.target.value)},children:[...ie.map(I=>t.jsx(K,{value:I,children:I},I))]})]}),t.jsx(ae,{label:"To table name",value:j,onChange:I=>{g(I.target.value)},fullWidth:!0})]})]}),r===H.TABLE&&G[e]!=="system"&&(G[e]!=="wp"||!n.settings.wp.tables.includes(s))&&t.jsxs(C,{className:"pp-action",children:[t.jsx(C,{children:t.jsx(z,{variant:"contained",onClick:()=>{y(!0)},children:"Truncate"})}),t.jsxs(C,{sx:{display:"grid",gridGap:"5px"},children:[t.jsx("span",{children:"Deletes all data permanently."}),t.jsx("strong",{children:"This action cannot be undone!"})]})]}),G[e]!=="system"&&(G[e]!=="wp"||!n.settings.wp.tables.includes(s))&&t.jsxs(C,{className:"pp-action",children:[t.jsx(C,{children:t.jsx(z,{variant:"contained",onClick:()=>{M(!0)},children:"Drop"})}),t.jsxs(C,{sx:{display:"grid",gridGap:"5px"},children:[t.jsx("span",{children:"Deletes table and all data permanently."}),t.jsx("strong",{children:"This action cannot be undone!"})]})]}),n.create!==""&&t.jsxs(C,{className:"pp-action",children:[t.jsx(C,{children:t.jsx(Bn,{text:n.create,onCopy:()=>{w("SQL was copied to your clipboard",{variant:"info"})},children:t.jsx(vn,{title:"Copy SQL to clipboard",children:t.jsx(z,{variant:"contained",endIcon:t.jsx(Wn,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),t.jsx(C,{sx:{display:"grid",gridGap:"5px"},children:t.jsx(C,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),t.jsx(Re,{title:"Rename table row?",message:"This can affect existing apps using this table!",open:T,setOpen:E,onConfirm:()=>{uo(e,s,f,I=>{if(b.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":r===H.TABLE?i(Be({dbs:e})):i(Pt({dbs:e})),i(Ge({})),w(I.message,{variant:"success"});break;case"info":w(I.message,{variant:"info"});break;default:b.error(I),w(I.message??_.contactSupport,{variant:"error"})}else b.error(I),w(_.contactSupport,{variant:"error"})},I=>{b.error("error",I),w(I??_.contactSupport,{variant:"error"})})}}),t.jsx(Re,{title:"Truncate table?",message:"This action cannot be undone!",open:v,setOpen:y,onConfirm:()=>{go(e,s,I=>{if(b.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":w(I.message,{variant:"success"});break;case"info":w(I.message,{variant:"info"});break;default:b.error(I),w(I.message??_.contactSupport,{variant:"error"})}else b.error(I),w(_.contactSupport,{variant:"error"})},I=>{b.error("error",I),w(I??_.contactSupport,{variant:"error"})})}}),t.jsx(Re,{title:"Drop table?",message:"This action cannot be undone!",open:S,setOpen:M,onConfirm:()=>{mo(e,s,I=>{if(b.error(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":i(Be({dbs:e})),i(Ge({})),w(I.message,{variant:"success"});break;case"info":w(I.message,{variant:"info"});break;default:b.error(I),w(I.message??_.contactSupport,{variant:"error"})}else b.error(I),w(_.contactSupport,{variant:"error"})},I=>{b.error("error",I),w(I??_.contactSupport,{variant:"error"})})}})]})},fo=({dbs:e,tbl:s,typ:r})=>{var I,se;b.debug(e,s,r);const n=F(),[i,a]=p.useState(pe(rt.getState()));b.debug(i);const[c,l]=p.useState(""),[u,f]=p.useState(!1),[d,o]=p.useState({}),[x,j]=p.useState(!1),[g,m]=p.useState(!1);p.useEffect(()=>{u||h()},[e,s]);const h=()=>{Hn(e,s,!0,k=>{var A,le;const L=k==null?void 0:k.data;if(b.debug("response data",e,s,L),(A=L==null?void 0:L.access)!=null&&A.select&&Array.isArray(L.access.select)&&L.access.select.includes("POST")){const V={...L.settings};V.list_labels={...L.table_labels},V.form_labels={...L.form_labels},V.column_media={...L.wp_media},delete V.hyperlinks,delete V.ui,delete V.wp;const ce={...L};o(ce),n(Zs({settings:V,metaData:ce})),f(!0)}else{let V=_.contactSupport;(le=k==null?void 0:k.data)!=null&&le.message&&(V=k.data.message+" - check console for more information"),b.error(V),l(V)}},k=>{b.error("error",k),l(k??_.contactSupport)})};p.useEffect(()=>{c!==""&&(n(Mt({error:c})),n(ht({})),n(Ge({})))},[c]);const T=P(k=>pe(k));b.debug(T);const E=((I=$e)==null?void 0:I.palette.mode)===en.LIGHT?(se=$e)==null?void 0:se.palette.primary.main:"",v=k=>{n(tn({anchor:k}))},y=()=>{n(Ge({})),n(ht({}))},S=()=>{x?m(!0):y()},M=()=>{const k={...T};let L=!1;pn(e,s,k,A=>{if(A!=null&&A.code&&(A==null?void 0:A.message)!==void 0)switch(A.code){case"ok":w(A.message,{variant:"success"});break;case"info":w(A.message,{variant:"info"});break;default:b.error(A),w(A.message??_.contactSupport,{variant:"error"}),L=!0}else b.error(A),w(_.contactSupport,{variant:"error"}),L=!0},A=>{b.error(A),w(A??_.contactSupport,{variant:"error"}),L=!0}),L||a(pe(rt.getState())),j(!1)},O=()=>{x?(M(),setTimeout(()=>{y()},1e3)):y()},[te,ie]=p.useState("1"),G=(k,L)=>{ie(L)};return c!==""?null:t.jsxs(t.Fragment,{children:[t.jsxs(An,{closeDrawer:S,children:[t.jsx(kt,{position:"static",sx:{borderRadius:0},children:t.jsxs(Lt,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[t.jsxs(C,{sx:{flexGrow:1},children:[t.jsx(xe,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage Table"}),t.jsxs(xe,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:[e," - ",s]})]}),t.jsx(re,{title:"Dock to left",position:"bottom",children:t.jsx(ge,{onClick:()=>{v(bt.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:t.jsx(Dn,{})})}),t.jsx(re,{title:"Dock to right",position:"bottom",children:t.jsx(ge,{onClick:()=>{v(bt.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:t.jsx(On,{})})}),t.jsx(re,{title:"Close",position:"bottom",children:t.jsx(ge,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:t.jsx(En,{})})})]})}),t.jsx(ot,{className:"pp-settings-container",children:t.jsx(at,{sx:{padding:0,margin:0},children:u?t.jsxs(Fn,{value:te,children:[t.jsxs(Nn,{variant:"fullWidth",textColor:"primary",onChange:G,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[t.jsx(Ct,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),t.jsx(Ct,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),t.jsxs(C,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[t.jsx(jt,{value:"1",children:t.jsx(xo,{dbs:e,tbl:s,typ:r,metaData:d})}),t.jsxs(jt,{value:"2",children:[t.jsx(io,{dbs:e,tbl:s,setIsUpdated:j}),t.jsx(lo,{dbs:e,tbl:s,setIsUpdated:j}),t.jsx(co,{dbs:e,tbl:s,typ:r,metaData:d,setIsUpdated:j}),t.jsx(ao,{dbs:e,tbl:s})]})]})]}):t.jsx(C,{sx:{padding:"30px"},children:t.jsx(mt,{title:"Loading data..."})})})}),t.jsx(ot,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:E},children:t.jsxs(at,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[t.jsx(z,{variant:"outlined",className:"footer_action_button_apply",onClick:M,children:"Apply"}),t.jsx(z,{variant:"outlined",className:"footer_action_button",onClick:O,children:"OK"}),t.jsx(z,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})]}),t.jsx(Re,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:g,setOpen:m,onConfirm:()=>{y()}})]})},ho=()=>{const e=P(s=>pt(s));return b.debug(e),t.jsx(t.Fragment,{children:e!==void 0&&e.action===oe.MANAGE&&t.jsx(fo,{dbs:e.dbs,tbl:e.tbl,typ:e.typ})})},na=()=>{const e=Vn();return t.jsx(wn,{theme:e,children:t.jsxs(C,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[t.jsx(oo,{}),t.jsx(ro,{}),t.jsx(ho,{})]})})};export{na as default};
